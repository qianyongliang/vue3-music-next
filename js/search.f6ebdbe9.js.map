{"version":3,"sources":["webpack:///./src/views/search/search.vue?6d95","webpack:///./src/service/search.ts","webpack:///./src/components/search/use-search-history.ts","webpack:///./src/components/search/search-input.vue?d021","webpack:///./node_modules/_throttle-debounce@3.0.1@throttle-debounce/esm/index.js","webpack:///./src/components/search/search-input.vue","webpack:///./src/components/search/search-input.vue?7809","webpack:///./src/components/base/search-list/search-list.vue?565e","webpack:///./src/components/base/search-list/search-list.vue","webpack:///./src/components/base/search-list/search-list.vue?c088","webpack:///./src/components/base/confirm/confirm.vue?ef68","webpack:///./src/components/base/confirm/confirm.vue","webpack:///./src/components/base/confirm/confirm.vue?bb8a","webpack:///./src/components/search/suggest.vue?6ef8","webpack:///./node_modules/@better-scroll/pull-up/dist/pull-up.esm.js","webpack:///./src/components/search/use-pull-up-load.ts","webpack:///./src/components/search/suggest.vue","webpack:///./src/components/search/suggest.vue?9c21","webpack:///./src/views/search/search.vue","webpack:///./src/views/search/search.vue?f2da","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./src/components/search/search-input.vue?d84b","webpack:///./src/components/wrap-scroll/index.ts","webpack:///./src/components/base/search-list/search-list.vue?78ee","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./src/components/base/confirm/confirm.vue?e4c3","webpack:///./src/views/search/search.vue?909e","webpack:///./src/components/search/suggest.vue?f05e"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_createElementVNode","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","render","_ctx","_cache","$props","$setup","$data","$options","_component_search_input","_resolveComponent","_component_confirm","_component_search_list","_component_scroll","_component_suggest","_component_router_view","_openBlock","_createElementBlock","_createVNode","modelValue","query","$event","_withDirectives","ref","default","_withCtx","_Fragment","_renderList","hotKeys","item","key","id","onClick","addQuery","_toDisplayString","showConfirm","text","onConfirm","clearSearch","searches","searchHistory","onSelect","onDelete","deleteSearch","_vShow","length","_","onSelectSong","selectSong","onSelectSinger","selectSinger","Component","_Transition","appear","name","_createBlock","_resolveDynamicComponent","data","selectedSinger","getHotKeys","Promise","resolve","reject","get","then","res","catch","err","search","page","showSinger","useSearchHistory","maxLen","store","useStore","saveSearch","save","SEARCH_KEY","commit","types","remove","clear","placeholder","_vModelText","throttle","delay","noTrailing","callback","debounceMode","timeoutID","cancelled","lastExec","clearExistingTimeout","clearTimeout","cancel","wrapper","_len","arguments","arguments_","Array","_key","self","this","elapsed","Date","now","exec","apply","undefined","setTimeout","debounce","atBegin","defineComponent","props","String","type","setup","emit","value","watch","newVal","newQuery","trim","__exports__","_TransitionGroup","tag","selectItem","showDelete","_withModifiers","deleteItem","_createCommentVNode","Boolean","emits","_Teleport","to","confirm","confirmBtnText","cancelBtnText","visible","hide","show","_directive_loading","_resolveDirective","_directive_no_result","singer","songs","song","pullUpLoading","loadingText","loading","noResult","noResultText","inBrowser","window","ua","navigator","userAgent","toLowerCase","test","indexOf","regex","matches","parts","split","map","parseInt","EventName","opts","Object","defineProperty","addEventListener","e","extend","target","source","elementStyle","document","createElement","style","vendor","transformNames","_i","transformNames_1","obj","prefixStyle","charAt","toUpperCase","substr","sourcePrefix","propertiesMap","propertiesConfig","sourceKey","PULL_UP_HOOKS_NAME","PullUp","scroll","pulling","watching","init","prototype","handleBScroll","handleOptions","options","pullUpLoad","handleHooks","registerType","proxy","userOptions","defaultOptions","threshold","probeType","_this","hooksFn","scrollBehaviorY","scroller","registerHooks","hooks","eventTypes","contentChanged","finishPullUp","computeBoundary","boundary","maxScrollPos","handler","on","push","checkPullUp","unwatch","off","pos","movingDirectionY","y","maxScrollY","once","scrollEnd","trigger","setMovingDirection","openPullUp","config","closePullUp","autoPullUpLoad","NEGATIVE_VALUE","outOfBoundaryPos","scrollTo","x","bounceTime","pluginName","BScroll","use","ObserveDOM","usePullUpLoad","requestData","preventPullUpLoad","rootRef","isPullUpLoad","onMounted","scrollVal","observeDOM","click","pullingUpHandler","refresh","onUnmounted","destroy","onActivated","enable","onDeactivated","disable","hasMore","manualLoading","computed","searchMore","searchFirst","result","processSongs","nextTick","makeItScrollable","concat","components","SearchInput","SearchList","Confirm","Scroll","Suggest","router","useRouter","state","reactive","scrollRef","confirmRef","getHotKeysApi","refreshScroll","val","cache","SINGER_KEY","path","mid","toRefs","$","$trim","forcedStringTrimMethod","proto","forced","ctx","h","mergeProps","onScroll","$emit","withCtx","renderSlot","$slots","PROPER_FUNCTION_NAME","PROPER","fails","whitespaces","non","module","exports","METHOD_NAME"],"mappings":"iIAEMA,EAAe,SAAAC,GAAC,OAAKC,eAAa,mBAAmBD,EAAEA,IAAIE,iBAAcF,GACzEG,EAAa,CAAEC,MAAO,UACtBC,EAAa,CAAED,MAAO,wBACtBE,EAAa,CAAEF,MAAO,YACtBG,EAA2BR,GAAa,kBAAmBS,eAAoB,KAAM,CAAEJ,MAAO,SAAW,QAAS,MAClHK,EAAa,CAAC,WACdC,EAAa,CAAEN,MAAO,kBACtBO,EAAa,CAAEP,MAAO,SACtBQ,EAA2Bb,GAAa,kBAAmBS,eAAoB,OAAQ,CAAEJ,MAAO,QAAU,QAAS,MACnHS,EAA2Bd,GAAa,kBAAmBS,eAAoB,IAAK,CAAEJ,MAAO,cAAgB,MAAO,MACpHU,EAAc,CAClBD,GAEIE,EAAc,CAAEX,MAAO,iBAEvB,SAAUY,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMC,EAA0BC,eAAkB,gBAC5CC,EAAqBD,eAAkB,WACvCE,EAAyBF,eAAkB,eAC3CG,EAAoBH,eAAkB,UACtCI,EAAqBJ,eAAkB,WACvCK,EAAyBL,eAAkB,eAEjD,OAAQM,iBAAcC,eAAoB,MAAO5B,EAAY,CAC3DK,eAAoB,MAAOH,EAAY,CACrC2B,eAAaT,EAAyB,CACpCU,WAAYhB,EAAKiB,MACjB,sBAAuBhB,EAAO,KAAOA,EAAO,GAAK,SAACiB,GAAD,OAAmBlB,EAAKiB,MAASC,KACjF,KAAM,EAAG,CAAC,iBAEfC,eAAgBJ,eAAaL,EAAmB,CAC9CU,IAAK,YACLjC,MAAO,kBACN,CACDkC,QAASC,gBAAS,iBAAM,CACtB/B,eAAoB,MAAO,KAAM,CAC/BA,eAAoB,MAAOF,EAAY,CACrCC,EACAC,eAAoB,KAAM,KAAM,EAC7BsB,gBAAW,GAAOC,eAAoBS,OAAW,KAAMC,eAAYxB,EAAKyB,SAAS,SAACC,GACjF,OAAQb,iBAAcC,eAAoB,KAAM,CAC9C3B,MAAO,OACPwC,IAAKD,EAAKE,GACVC,QAAS,SAACX,GAAD,OAAkBlB,EAAK8B,SAASJ,EAAKC,OAC7C,CACDpC,eAAoB,OAAQ,KAAMwC,eAAiBL,EAAKC,KAAM,IAC7D,EAAGnC,MACJ,UAGR2B,eAAgB5B,eAAoB,MAAOE,EAAY,CACrDF,eAAoB,KAAMG,EAAY,CACpCC,EACAJ,eAAoB,OAAQ,CAC1BJ,MAAO,QACP0C,QAAS5B,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAKgC,aAAehC,EAAKgC,YAAL,MAAAhC,EAAI,cACrBH,KAELkB,eAAaP,EAAoB,CAC/BY,IAAK,aACLa,KAAM,aACN,mBAAoB,KACpBC,UAAWlC,EAAKmC,aACf,KAAM,EAAG,CAAC,cACbpB,eAAaN,EAAwB,CACnC2B,SAAUpC,EAAKqC,cACfC,SAAUtC,EAAK8B,SACfS,SAAUvC,EAAKwC,cACd,KAAM,EAAG,CAAC,WAAY,WAAY,cACpC,KAAM,CACP,CAACC,OAAQzC,EAAKqC,cAAcK,gBAIlCC,EAAG,GACF,KAAM,CACP,CAACF,QAASzC,EAAKiB,SAEjBE,eAAgB5B,eAAoB,MAAOO,EAAa,CACtDiB,eAAaJ,EAAoB,CAC/BM,MAAOjB,EAAKiB,MACZ2B,aAAc5C,EAAK6C,WACnBC,eAAgB9C,EAAK+C,cACpB,KAAM,EAAG,CAAC,QAAS,eAAgB,oBACrC,KAAM,CACP,CAACN,OAAQzC,EAAKiB,SAEhBF,eAAaH,EAAwB,KAAM,CACzCS,QAASC,gBAAS,gBAAG0B,EAAH,EAAGA,UAAH,MAAmB,CACnCjC,eAAakC,OAAa,CACxBC,OAAQ,GACRC,KAAM,SACL,CACD9B,QAASC,gBAAS,iBAAM,EACrBT,iBAAcuC,eAAaC,eAAyBL,GAAY,CAAEM,KAAMtD,EAAKuD,gBAAkB,KAAM,EAAG,CAAC,cAE5GZ,EAAG,GACF,UAELA,EAAG,M,wFCtFIa,EAAa,WACxB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3BC,eAAI,mBACDC,MAAK,SAACC,GACLJ,EAAQI,MAETC,OAAM,SAACC,GACNL,EAAOK,UAMFC,EAAS,SAAChD,EAAeiD,EAAcC,GAClD,OAAO,IAAIV,SAAQ,SAACC,EAASC,GAC3BC,eAAI,cAAe,CACjB3C,QACAiD,OACAC,eAECN,MAAK,SAACC,GACLJ,EAAQI,MAETC,OAAM,SAACC,GACNL,EAAOK,U,oCCpCTI,EAAmB,WACvB,IAAMC,EAAS,IAETC,EAAQC,iBAGRC,EAAa,SAACvD,GAClB,IAAMmB,EAAWqC,eAAKxD,EAAOyD,QAAY,SAAChD,GACxC,OAAOA,IAAST,IACfoD,GACHC,EAAMK,OAAOC,OAA0BxC,IAInCI,EAAe,SAACvB,GACpB,IAAMmB,EAAWyC,eAAOH,QAAY,SAAChD,GACnC,OAAOA,IAAST,KAElBqD,EAAMK,OAAOC,OAA0BxC,IAInCD,EAAc,WAClB,IAAMC,EAAW0C,eAAMJ,QACvBJ,EAAMK,OAAOC,OAA0BxC,IAGzC,MAAO,CACLoC,aACAhC,eACAL,gBAIWiC,ICrCTtF,EAAe,SAAAC,GAAC,OAAKC,eAAa,mBAAmBD,EAAEA,IAAIE,iBAAcF,GACzEG,EAAa,CAAEC,MAAO,gBACtBC,EAA2BN,GAAa,kBAAmBS,eAAoB,IAAK,CAAEJ,MAAO,eAAiB,MAAO,MACrHE,EAAa,CAAC,eAEd,SAAUU,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQQ,iBAAcC,eAAoB,MAAO5B,EAAY,CAC3DE,EACA+B,eAAgB5B,eAAoB,QAAS,CAC3CJ,MAAO,cACP,sBAAuBc,EAAO,KAAOA,EAAO,GAAK,SAACiB,GAAD,OAAmBlB,EAAKiB,MAASC,IAClF6D,YAAa/E,EAAK+E,aACjB,KAAM,EAAG1F,GAAa,CACvB,CAAC2F,OAAahF,EAAKiB,SAErBE,eAAgB5B,eAAoB,IAAK,CACvCJ,MAAO,eACP0C,QAAS5B,EAAO,KAAOA,EAAO,GAEpC,kBAAcD,EAAK8E,OAAS9E,EAAK8E,MAAL,MAAA9E,EAAI,cACzB,KAAM,KAAM,CACb,CAACyC,OAAQzC,EAAKiB,W,UCLpB,SAASgE,EAAUC,EAAOC,EAAYC,EAAUC,GAM9C,IAAIC,EACAC,GAAY,EAEZC,EAAW,EAEf,SAASC,IACHH,GACFI,aAAaJ,GAKjB,SAASK,IACPF,IACAF,GAAY,EAgBd,SAASK,IACP,IAAK,IAAIC,EAAOC,UAAUpD,OAAQqD,EAAa,IAAIC,MAAMH,GAAOI,EAAO,EAAGA,EAAOJ,EAAMI,IACrFF,EAAWE,GAAQH,UAAUG,GAG/B,IAAIC,EAAOC,KACPC,EAAUC,KAAKC,MAAQd,EAO3B,SAASe,IACPf,EAAWa,KAAKC,MAChBlB,EAASoB,MAAMN,EAAMH,GAQvB,SAASjB,IACPQ,OAAYmB,EAhBVlB,IAmBAF,IAAiBC,GAKnBiB,IAGFd,SAEqBgB,IAAjBpB,GAA8Be,EAAUlB,EAK1CqB,KACwB,IAAfpB,IAYTG,EAAYoB,WAAWrB,EAAeP,EAAQyB,OAAuBE,IAAjBpB,EAA6BH,EAAQkB,EAAUlB,KAMvG,MAzE0B,mBAAfC,IACTE,EAAeD,EACfA,EAAWD,EACXA,OAAasB,GAoEfb,EAAQD,OAASA,EAEVC,EAmBT,SAASe,EAAUzB,EAAO0B,EAASxB,GACjC,YAAoBqB,IAAbrB,EAAyBH,EAASC,EAAO0B,GAAS,GAAS3B,EAASC,EAAOE,GAAsB,IAAZwB,GCnI/EC,qBAAgB,CAC7B1D,KAAM,eACN2D,MAAO,CACL9F,WAAY+F,OACZhC,YAAa,CACXiC,KAAMD,OACN1F,QAAS,YAGb4F,MAT6B,SAStBH,EATsB,GASP,IAANI,EAAM,EAANA,KACRjG,EAAQG,eAAwB0F,EAAM9F,YACtC8D,EAAQ,WACZ7D,EAAMkG,MAAQ,IAchB,OAXAC,gBAAM,kBAAMN,EAAM9F,cAAY,SAACqG,GAC7BpG,EAAMkG,MAAQE,KAGhBD,gBACE,kBAAMnG,EAAMkG,QACZR,EAAS,KAAK,SAACW,GACbJ,EAAK,oBAAqBI,EAASC,YAIhC,CACLtG,QACA6D,Y,iCCzBN,MAAM0C,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAE1E,QCPT1I,EAAe,SAAAC,GAAC,OAAKC,eAAa,mBAAmBD,EAAEA,IAAIE,iBAAcF,GACzEG,EAAa,CAAEC,MAAO,eACtBC,EAAa,CAAC,WACdC,EAAa,CAAEF,MAAO,QACtBG,EAAa,CAAC,WACdE,EAA2BV,GAAa,kBAAmBS,eAAoB,IAAK,CAAEJ,MAAO,eAAiB,MAAO,MACrHM,EAAa,CACjBD,GAGI,SAAUO,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQQ,iBAAcC,eAAoB,MAAO5B,EAAY,CAC3D6B,eAAa0G,OAAkB,CAC7BtE,KAAM,OACNuE,IAAK,MACJ,CACDrG,QAASC,gBAAS,iBAAM,EACrBT,gBAAW,GAAOC,eAAoBS,OAAW,KAAMC,eAAYxB,EAAKoC,UAAU,SAACV,GAClF,OAAQb,iBAAcC,eAAoB,KAAM,CAC9Ca,IAAKD,EACLvC,MAAO,cACP0C,QAAS,SAACX,GAAD,OAAkBlB,EAAK2H,WAAWjG,KAC1C,CACDnC,eAAoB,OAAQF,EAAY0C,eAAiBL,GAAO,GAC/D1B,EAAK4H,YACD/G,iBAAcC,eAAoB,OAAQ,CACzCa,IAAK,EACLxC,MAAO,OACP0C,QAASgG,gBAAe,SAAC3G,GAAD,OAAkBlB,EAAK8H,WAAWpG,KAAQ,CAAC,UAClEjC,EAAY,EAAGH,IAClByI,eAAoB,IAAI,IAC3B,EAAG3I,MACJ,UAENuD,EAAG,MClCMkE,qBAAgB,CAC7B1D,KAAM,cACN2D,MAAO,CACL1E,SAAU,CACR4E,KAAMhB,MACN3E,QAAS,iBAAM,KAEjBuG,WAAY,CACVZ,KAAMgB,QACN3G,SAAS,IAGb4G,MAAO,CAAC,SAAU,UAClBhB,MAb6B,SAatBH,EAbsB,GAaP,IAANI,EAAM,EAANA,KACRS,EAAa,SAACjG,GAClBwF,EAAK,SAAUxF,IAEXoG,EAAa,SAACpG,GAClBwF,EAAK,SAAUxF,IAEjB,MAAO,CACLiG,aACAG,iB,UCjBN,MAAM,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAE1E,QCNT5I,EAAa,CAAEC,MAAO,WACtBC,EAAa,CAAED,MAAO,mBACtBE,GAAa,CAAEF,MAAO,mBACtBG,GAAa,CAAEH,MAAO,QACtBK,GAAa,CAAEL,MAAO,WAEtB,SAAUY,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQQ,iBAAcuC,eAAa8E,OAAW,CAAEC,GAAI,QAAU,CAC5DpH,eAAakC,OAAa,CAAEE,KAAM,gBAAkB,CAClD9B,QAASC,gBAAS,iBAAM,CACtBH,eAAgB5B,eAAoB,MAAOL,EAAY,CACrDK,eAAoB,MAAOH,EAAY,CACrCG,eAAoB,MAAOF,GAAY,CACrCE,eAAoB,IAAKD,GAAYyC,eAAiB/B,EAAKiC,MAAO,GAClE1C,eAAoB,MAAOC,GAAY,CACrCD,eAAoB,MAAO,CACzBJ,MAAO,mBACP0C,QAAS5B,EAAO,KAAOA,EAAO,GAEhD,kBAAcD,EAAKoI,SAAWpI,EAAKoI,QAAL,MAAApI,EAAI,cACf+B,eAAiB/B,EAAKqI,gBAAiB,GAC1C9I,eAAoB,MAAO,CACzBJ,MAAO,cACP0C,QAAS5B,EAAO,KAAOA,EAAO,GAEhD,kBAAcD,EAAK2F,QAAU3F,EAAK2F,OAAL,MAAA3F,EAAI,cACd+B,eAAiB/B,EAAKsI,eAAgB,UAI9C,KAAM,CACP,CAAC7F,OAAQzC,EAAKuI,eAGlB5F,EAAG,MCnCMkE,sBAAgB,CAC7B1D,KAAM,UACN2D,MAAO,CACL7E,KAAM,CACJ+E,KAAMD,OACN1F,QAAS,IAEXgH,eAAgB,CACdrB,KAAMD,OACN1F,QAAS,MAEXiH,cAAe,CACbtB,KAAMD,OACN1F,QAAS,OAGb4G,MAAO,CAAC,UAAW,UACnBhB,MAjB6B,SAiBtBH,EAjBsB,GAiBP,IAANI,EAAM,EAANA,KACRqB,EAAUnH,gBAAa,GACvBgH,EAAU,WACdI,IACAtB,EAAK,YAEDvB,EAAS,WACb6C,IACAtB,EAAK,WAEDsB,EAAO,WACXD,EAAQpB,OAAQ,GAEZsB,EAAO,WACXF,EAAQpB,OAAQ,GAElB,MAAO,CACLoB,UACAH,UACAzC,SACA6C,OACAC,W,UCjCN,MAAM,GAA2B,IAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAE1E,U,aCPT3J,I,UAAe,SAAAC,GAAC,OAAKC,eAAa,mBAAmBD,EAAEA,IAAIE,iBAAcF,IACzEG,GAAa,CACjBkC,IAAK,UACLjC,MAAO,WAEHC,GAAa,CAAED,MAAO,gBACtBE,GAA2BP,IAAa,kBAAmBS,eAAoB,MAAO,CAAEJ,MAAO,QAAU,CAChGI,eAAoB,IAAK,CAAEJ,MAAO,gBAC7C,MACEG,GAAa,CAAEH,MAAO,QACtBK,GAAa,CAAEL,MAAO,QACtBM,GAAa,CAAC,WACdC,GAA2BZ,IAAa,kBAAmBS,eAAoB,MAAO,CAAEJ,MAAO,QAAU,CAChGI,eAAoB,IAAK,CAAEJ,MAAO,iBAC7C,MACEQ,GAAa,CAAER,MAAO,QACtBS,GAAa,CAAET,MAAO,QACtBU,GAAc,CAAEV,MAAO,gBAEvB,SAAUY,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMqI,EAAqBC,eAAkB,WACvCC,EAAuBD,eAAkB,aAE/C,OAAOxH,gBAAiBN,iBAAcC,eAAoB,MAAO5B,GAAY,CAC3EK,eAAoB,KAAMH,GAAY,CACnCY,EAAK6I,QACDhI,iBAAcC,eAAoB,KAAM,CACvCa,IAAK,EACLxC,MAAO,eACP0C,QAAS5B,EAAO,KAAOA,EAAO,GAAK,SAACiB,GAAD,OAAkBlB,EAAK+C,aAAa/C,EAAK6I,WAC3E,CACDxJ,GACAE,eAAoB,MAAOD,GAAY,CACrCC,eAAoB,IAAKC,GAAYuC,eAAiB/B,EAAK6I,OAAO1F,MAAO,QAG7E4E,eAAoB,IAAI,IAC3BlH,gBAAW,GAAOC,eAAoBS,OAAW,KAAMC,eAAYxB,EAAK8I,OAAO,SAACC,GAC/E,OAAQlI,iBAAcC,eAAoB,KAAM,CAC9C3B,MAAO,eACPwC,IAAKoH,EAAKnH,GACVC,QAAS,SAACX,GAAD,OAAkBlB,EAAK6C,WAAWkG,KAC1C,CACDrJ,GACAH,eAAoB,MAAOI,GAAY,CACrCJ,eAAoB,IAAKK,GAAYmC,eAAiBgH,EAAKF,QAAU,IAAM9G,eAAiBgH,EAAK5F,MAAO,MAEzG,EAAG1D,OACJ,MACJ0B,eAAgB5B,eAAoB,MAAOM,GAAa,KAAM,KAAM,CAClE,CAAC6I,EAAoB1I,EAAKgJ,cAAehJ,EAAKiJ,oBAG/C,CACH,CAACP,EAAoB1I,EAAKkJ,QAASlJ,EAAKiJ,aACxC,CAACL,EAAsB5I,EAAKmJ,SAAUnJ,EAAKoJ,gB,wCCnD3CC,GAA8B,qBAAXC,OACnBC,GAAKF,IAAaG,UAAUC,UAAUC,cACvCH,IAAM,iBAAiBI,KAAKJ,IAC/BA,IAAMA,GAAGK,QAAQ,WAEjB,WACI,GAAkB,kBAAPL,GAAiB,CACxB,IAAIM,EAAQ,sBACRC,EAAUD,EAAMtD,KAAKgD,IACzB,IAAKO,EACD,OAAO,EACX,IAAIC,EAAQD,EAAQ,GAAGE,MAAM,KAAKC,KAAI,SAAUvI,GAC5C,OAAOwI,SAASxI,EAAM,OAG1B,SAAuB,KAAbqI,EAAM,IAAaA,EAAM,IAAM,IAVjD,GAiBA,GAAIV,GAAW,CACX,IAAIc,GAAY,eAChB,IACI,IAAIC,GAAO,GACXC,OAAOC,eAAeF,GAAM,UAAW,CACnCxG,IAAK,YACiB,KAG1B0F,OAAOiB,iBAAiBJ,IAAW,cAAiBC,IAExD,MAAOI,MAGX,IAAIC,GAAS,SAAUC,EAAQC,GAC3B,IAAK,IAAIhJ,KAAOgJ,EACZD,EAAO/I,GAAOgJ,EAAOhJ,GAEzB,OAAO+I,GAGPE,GAAgBvB,IAChBwB,SAASC,cAAc,OAAOC,MAC9BC,GAAS,WAET,IAAK3B,GACD,OAAO,EAwBX,IAtBA,IAAI4B,EAAiB,CACjB,CACItJ,IAAK,WACLwF,MAAO,aAEX,CACIxF,IAAK,SACLwF,MAAO,mBAEX,CACIxF,IAAK,MACLwF,MAAO,gBAEX,CACIxF,IAAK,IACLwF,MAAO,cAEX,CACIxF,IAAK,KACLwF,MAAO,gBAGN+D,EAAK,EAAGC,EAAmBF,EAAgBC,EAAKC,EAAiBzI,OAAQwI,IAAM,CACpF,IAAIE,EAAMD,EAAiBD,GAC3B,QAAgCzE,IAA5BmE,GAAaQ,EAAIjE,OACjB,OAAOiE,EAAIzJ,IAInB,OAAO,EAlCE,GAqCb,SAAS0J,GAAYN,GACjB,OAAe,IAAXC,GACOD,EAEI,aAAXC,GACc,kBAAVD,EACO,gBAEJA,EAEJC,GAASD,EAAMO,OAAO,GAAGC,cAAgBR,EAAMS,OAAO,GAEjER,IAAqB,aAAXA,IAA8BA,GAAOtB,cAC/B2B,GAAY,aACXA,GAAY,cAC7BhC,IAAagC,GAAY,eAIKA,GAAY,4BAClBA,GAAY,sBACfA,GAAY,mBACZA,GAAY,mBACdA,GAAY,iBACPA,GAAY,sBAGpC,IAAII,GAAe,qBACfC,GAAgB,CAChB,CACI/J,IAAK,eACLwB,KAAM,gBAEV,CACIxB,IAAK,aACLwB,KAAM,cAEV,CACIxB,IAAK,cACLwB,KAAM,eAEV,CACIxB,IAAK,iBACLwB,KAAM,mBAGVwI,GAAmBD,GAAczB,KAAI,SAAUvI,GAC/C,MAAO,CACHC,IAAKD,EAAKC,IACViK,UAAWH,GAAe,IAAM/J,EAAKyB,SAIzC0I,GAAqB,YACrBC,GAAwB,WACxB,SAASA,EAAOC,GACZ5F,KAAK4F,OAASA,EACd5F,KAAK6F,SAAU,EACf7F,KAAK8F,UAAW,EAChB9F,KAAK+F,OAoGT,OAlGAJ,EAAOK,UAAUD,KAAO,WACpB/F,KAAKiG,gBACLjG,KAAKkG,cAAclG,KAAK4F,OAAOO,QAAQC,YACvCpG,KAAKqG,cACLrG,KAAKiB,SAET0E,EAAOK,UAAUC,cAAgB,WAC7BjG,KAAK4F,OAAOU,aAAa,CAACZ,KAC1B1F,KAAK4F,OAAOW,MAAMf,KAEtBG,EAAOK,UAAUE,cAAgB,SAAUM,QACnB,IAAhBA,IAA0BA,EAAc,IAC5CA,GAA+B,IAAhBA,EAAuB,GAAKA,EAC3C,IAAIC,EAAiB,CACjBC,UAAW,GAEf1G,KAAKmG,QAAU7B,GAAOmC,EAAgBD,GACtCxG,KAAK4F,OAAOO,QAAQQ,UAAY,GAEpChB,EAAOK,UAAUK,YAAc,WAC3B,IAAIO,EAAQ5G,KACZA,KAAK6G,QAAU,GACf,IAAIC,EAAkB9G,KAAK4F,OAAOmB,SAASD,gBAC3C9G,KAAKgH,cAAchH,KAAK4F,OAAOqB,MAAOjH,KAAK4F,OAAOqB,MAAMC,WAAWC,gBAAgB,WAC/EP,EAAMQ,kBAEVpH,KAAKgH,cAAcF,EAAgBG,MAAOH,EAAgBG,MAAMC,WAAWG,iBAAiB,SAAUC,GAE9FA,EAASC,aAAe,IAExBD,EAASC,cAAgB,OAIrC5B,EAAOK,UAAUgB,cAAgB,SAAUC,EAAOjK,EAAMwK,GACpDP,EAAMQ,GAAGzK,EAAMwK,EAASxH,MACxBA,KAAK6G,QAAQa,KAAK,CAACT,EAAOjK,EAAMwK,KAEpC7B,EAAOK,UAAU/E,MAAQ,WACjBjB,KAAK8F,WAGT9F,KAAK8F,UAAW,EAChB9F,KAAKgH,cAAchH,KAAK4F,OAAQ5F,KAAK4F,OAAOsB,WAAWtB,OAAQ5F,KAAK2H,eAExEhC,EAAOK,UAAU4B,QAAU,WACvB5H,KAAK8F,UAAW,EAChB9F,KAAK4F,OAAOiC,IAAI7H,KAAK4F,OAAOsB,WAAWtB,OAAQ5F,KAAK2H,cAExDhC,EAAOK,UAAU2B,YAAc,SAAUG,GACrC,IAAIlB,EAAQ5G,KACR0G,EAAY1G,KAAKmG,QAAQO,UACQ,IAAjC1G,KAAK4F,OAAOmC,kBACZD,EAAIE,GAAKhI,KAAK4F,OAAOqC,WAAavB,IAClC1G,KAAK6F,SAAU,EAEf7F,KAAK4F,OAAOsC,KAAKlI,KAAK4F,OAAOsB,WAAWiB,WAAW,WAC/CvB,EAAMf,SAAU,KAEpB7F,KAAK4H,UACL5H,KAAK4F,OAAOwC,QAAQ1C,MAG5BC,EAAOK,UAAUoB,aAAe,WAC5B,IAAIR,EAAQ5G,KAEZA,KAAK4F,OAAOmB,SAASD,gBAAgBuB,mBAAmB,GACpDrI,KAAK6F,QACL7F,KAAK4F,OAAOsC,KAAKlI,KAAK4F,OAAOsB,WAAWiB,WAAW,WAC/CvB,EAAM3F,WAIVjB,KAAKiB,SAIb0E,EAAOK,UAAUsC,WAAa,SAAUC,QACrB,IAAXA,IAAqBA,EAAS,IAClCvI,KAAKkG,cAAcqC,GACnBvI,KAAKiB,SAET0E,EAAOK,UAAUwC,YAAc,WAC3BxI,KAAK4H,WAETjC,EAAOK,UAAUyC,eAAiB,WAC9B,IAAI/B,EAAY1G,KAAKmG,QAAQO,UACzBI,EAAkB9G,KAAK4F,OAAOmB,SAASD,gBAC3C,IAAI9G,KAAK6F,SAAY7F,KAAK8F,SAA1B,CAIA,IAAI4C,GAAkB,EAClBC,EAAmB7B,EAAgBS,aAAeb,EAAYgC,EAClE1I,KAAK4F,OAAOmB,SAASD,gBAAgBuB,mBAAmBK,GACxD1I,KAAK4F,OAAOgD,SAAS5I,KAAK4F,OAAOiD,EAAGF,EAAkB3I,KAAK4F,OAAOO,QAAQ2C,cAE9EnD,EAAOoD,WAAa,aACbpD,EAzGgB,GA4GZ,M,aCrPfqD,QAAQC,IAAItD,IACZqD,QAAQC,IAAIC,SAKZ,IAAMC,GAAgB,SAACC,EAA0BC,GAC/C,IAAMzD,EAAS3K,eAAS,MAClBqO,EAAUrO,eAAS,MACnBsO,EAAetO,gBAAI,GAmCzB,OAlCAuO,gBAAU,WACR,IAAMC,EAAY7D,EAAO5E,MAAQ,IAAIgI,QAAQM,EAAQtI,MAAO,CAC1DoF,YAAY,EACZsD,YAAY,EACZC,OAAO,IAGHC,EAAgB,yDAAG,kGACnBP,EAAkBrI,MADC,uBAErByI,EAAUrC,eAFW,iCAKvBmC,EAAavI,OAAQ,EALE,SAMjBoI,IANiB,OAOvBK,EAAUrC,eACVqC,EAAUI,UACVN,EAAavI,OAAQ,EATE,2CAAH,qDAWtByI,EAAUhC,GAAG,YAAamC,MAG5BE,gBAAY,WACVlE,EAAO5E,MAAM+I,aAGfC,gBAAY,WACVpE,EAAO5E,MAAMiJ,SACbrE,EAAO5E,MAAM6I,aAGfK,gBAAc,WACZtE,EAAO5E,MAAMmJ,aAGR,CACLvE,SACA0D,UACAC,iBAIWJ,MCjDAzI,kBAAgB,CAC7B1D,KAAM,UACN2D,MAAO,CACL7F,MAAO8F,OACP5C,WAAY,CAEV6C,KAAMgB,QACN3G,SAAS,IAGb4G,MAAO,CAAC,cAAe,iBACvBhB,MAX6B,SAWtBH,EAXsB,GAWP,IAANI,EAAM,EAANA,KACR4B,EAAQ1H,eAAiB,IACzByH,EAASzH,eAAS,MAClBmP,EAAUnP,gBAAa,GACvB8C,EAAO9C,eAAY,GACnB6H,EAAc7H,eAAY,IAC1BgI,EAAehI,eAAY,aAC3BoP,EAAgBpP,gBAAa,GAE7B8H,EAAUuH,gBAAS,WACvB,OAAQ5H,EAAO1B,QAAU2B,EAAM3B,MAAMzE,UAGjCyG,EAAWsH,gBAAS,WACxB,OAAQ5H,EAAO1B,QAAU2B,EAAM3B,MAAMzE,SAAW6N,EAAQpJ,SAGpD6B,EAAgByH,gBAAS,WAC7B,OAAOf,EAAavI,OAASoJ,EAAQpJ,SAGjCqI,EAAoBiB,gBAAS,WACjC,OAAOvH,EAAQ/B,OAASqJ,EAAcrJ,SAGxC,EAA0CmI,GACxCoB,EACAlB,GAFME,EAAR,EAAQA,aAAcD,EAAtB,EAAsBA,QAAS1D,EAA/B,EAA+BA,OAK/B3E,gBACE,kBAAMN,EAAM7F,QADT,yDAEH,WAAOqG,GAAP,oFACOA,EADP,iEAIQqJ,IAJR,2CAFG,uDAWL,IAAMA,EAAW,yDAAG,uGACb7J,EAAM7F,MADO,wDAKlBiD,EAAKiD,MAAQ,EACb2B,EAAM3B,MAAQ,GACd0B,EAAO1B,MAAQ,KACfoJ,EAAQpJ,OAAQ,EARE,SAUGlD,EAAO6C,EAAM7F,MAAOiD,EAAKiD,MAAOL,EAAM3C,YAVzC,cAUZyM,EAVY,iBAYEC,gBAAaD,EAAO9H,OAZtB,eAYlBA,EAAM3B,MAZY,OAalB0B,EAAO1B,MAAQyJ,EAAO/H,OACtB0H,EAAQpJ,MAAQyJ,EAAOL,QAdL,UAeZO,iBAfY,yBAgBZC,IAhBY,4CAAH,qDAzCG,SA4DLL,IA5DK,6FA4DpB,uGACOH,EAAQpJ,OAAUL,EAAM7F,MAD/B,wDAIEiD,EAAKiD,QAJP,SAKuBlD,EAAO6C,EAAM7F,MAAOiD,EAAKiD,MAAOL,EAAM3C,YAL7D,cAKQyM,EALR,YAMgB9H,EAAM3B,MANtB,SAMyC0J,gBAAaD,EAAO9H,OAN7D,0BAMEA,EAAM3B,MANR,KAM4B6J,OAN5B,gBAOET,EAAQpJ,MAAQyJ,EAAOL,QAPzB,UAQQO,iBARR,yBAUQC,IAVR,4CA5DoB,wBAyEpB,IAAMA,EAAgB,yDAAG,mGACnBhF,EAAO5E,MAAMiH,aAAe,GADT,uBAErBoC,EAAcrJ,OAAQ,EAFD,SAGfuJ,IAHe,OAIrBF,EAAcrJ,OAAQ,EAJD,2CAAH,qDAQhBpE,EAAe,SAAC8F,GACpB3B,EAAK,gBAAiB2B,IAGlBhG,EAAa,SAACkG,GAClB7B,EAAK,cAAe6B,IAGtB,MAAO,CACLD,QACAD,SACAI,cACAD,gBACAI,eACAF,UACAC,WACApG,eACAF,aACA4M,c,UC9GN,MAAM,GAA2B,IAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAE1E,UCoBA5I,kBAAgB,CAC7B1D,KAAM,SACN8N,WAAY,CACVC,cACAC,aACAC,WACAC,eACAC,YAEFrK,MAT6B,WAU3B,IAAM3C,EAAQC,iBACRgN,EAASC,iBACTnP,EAAgBoO,gBAAS,kBAAMnM,EAAMmN,MAAMpP,iBAE3CoP,EAAQC,eAAS,CACrBjQ,QAAS,GACTR,MAAO,KAGH0Q,EAAYvQ,eAAS,MACrBwQ,EAAaxQ,eAAS,MACtBmC,EAAiBnC,eAAS,MAChC,EAAkDgD,IAA1CI,EAAR,EAAQA,WAAYhC,EAApB,EAAoBA,aAAcL,EAAlC,EAAkCA,YAG5B0P,EAAa,yDAAG,oHACCrO,IADD,OACdoN,EADc,OAEpBa,EAAMhQ,QAAN,OAAgBmP,QAAhB,IAAgBA,OAAhB,EAAgBA,EAAQnP,QAFJ,2CAAH,qDAInBoQ,IAEAzK,gBACE,kBAAMqK,EAAMxQ,QADT,yDAEH,WAAOqG,GAAP,oFACOA,EADP,gCAEUwJ,iBAFV,OAGIgB,IAHJ,2CAFG,uDAUL,IAAMA,EAAgB,WACpBH,EAAUxK,MAAM4E,OAAOiE,WAGnBlO,EAAW,SAACiQ,GAChBN,EAAMxQ,MAAQ8Q,GAGVlP,EAAa,SAACkG,GAClBvE,EAAWiN,EAAMxQ,QAIb8B,EAAe,SAAC8F,GACpBrE,EAAWiN,EAAMxQ,OACjBsC,EAAe4D,MAAQ0B,EACvBmJ,eAAMC,OAAYpJ,GAElB0I,EAAO1D,KAAK,CACVqE,KAAM,WAAF,OAAarJ,EAAOsJ,QAItBnQ,EAAc,WAClB4P,EAAWzK,MAAMsB,QAGnB,wCACK2J,eAAOX,IADZ,IAEEpP,gBACAsP,YACAC,aACArO,iBACAzB,WACAE,cACAQ,eACAL,cACAU,aACAE,oB,UCrGN,MAAM,GAA2B,IAAgB,GAAQ,CAAC,CAAC,SAAShD,GAAQ,CAAC,YAAY,qBAE1E,iB,oFCRf,IAAIsS,EAAI,EAAQ,QACZC,EAAQ,EAAQ,QAA4B/K,KAC5CgL,EAAyB,EAAQ,QAIrCF,EAAE,CAAE3H,OAAQ,SAAU8H,OAAO,EAAMC,OAAQF,EAAuB,SAAW,CAC3EhL,KAAM,WACJ,OAAO+K,EAAMnM,U,oCCTjB,W,oCCAA,4BAIe,QACbhD,KAAM,cACN2D,MAAOuK,OAAOvK,MACdmB,MAAOoJ,OAAOpJ,MACdlI,OAJa,SAIL2S,GAEN,OAAOC,eACLtB,OACAuB,eACE,CACExR,IAAK,aAEPsR,EAAIxS,OACJ,CACE2S,SAAU,SAAC5E,GAETyE,EAAII,MAAM,SAAU7E,MAI1B,CACE5M,QAAS0R,gBAAQ,WAEf,MAAO,CAACC,eAAWN,EAAIO,OAAQ,kBAKvChM,MA5Ba,WA6BX,IAAM0K,EAAYvQ,eAAS,MACrB2K,EAAS0E,gBAAS,WACtB,OAAOkB,EAAUxK,MAAM4E,UAGzB,MAAO,CACL4F,YACA5F,a,kCCxCN,W,4CCAA,IAAImH,EAAuB,EAAQ,QAA8BC,OAC7DC,EAAQ,EAAQ,QAChBC,EAAc,EAAQ,QAEtBC,EAAM,MAIVC,EAAOC,QAAU,SAAUC,GACzB,OAAOL,GAAM,WACX,QAASC,EAAYI,MAChBH,EAAIG,OAAmBH,GACtBJ,GAAwBG,EAAYI,GAAatQ,OAASsQ,O,kCCZpE,W,gFCAA,W,kCCAA","file":"js/search.f6ebdbe9.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vShow as _vShow, withDirectives as _withDirectives, withCtx as _withCtx, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, Transition as _Transition, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1f517b37\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"search\" }\nconst _hoisted_2 = { class: \"search-input-wrapper\" }\nconst _hoisted_3 = { class: \"hot-keys\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", { class: \"title\" }, \"热门搜索\", -1))\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = { class: \"search-history\" }\nconst _hoisted_7 = { class: \"title\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"text\" }, \"搜索历史\", -1))\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"icon-clear\" }, null, -1))\nconst _hoisted_10 = [\n  _hoisted_9\n]\nconst _hoisted_11 = { class: \"search-result\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_search_input = _resolveComponent(\"search-input\")!\n  const _component_confirm = _resolveComponent(\"confirm\")!\n  const _component_search_list = _resolveComponent(\"search-list\")!\n  const _component_scroll = _resolveComponent(\"scroll\")!\n  const _component_suggest = _resolveComponent(\"suggest\")!\n  const _component_router_view = _resolveComponent(\"router-view\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_search_input, {\n        modelValue: _ctx.query,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.query) = $event))\n      }, null, 8, [\"modelValue\"])\n    ]),\n    _withDirectives(_createVNode(_component_scroll, {\n      ref: \"scrollRef\",\n      class: \"search-content\"\n    }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", null, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _hoisted_4,\n            _createElementVNode(\"ul\", null, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.hotKeys, (item) => {\n                return (_openBlock(), _createElementBlock(\"li\", {\n                  class: \"item\",\n                  key: item.id,\n                  onClick: ($event: any) => (_ctx.addQuery(item.key))\n                }, [\n                  _createElementVNode(\"span\", null, _toDisplayString(item.key), 1)\n                ], 8, _hoisted_5))\n              }), 128))\n            ])\n          ]),\n          _withDirectives(_createElementVNode(\"div\", _hoisted_6, [\n            _createElementVNode(\"h1\", _hoisted_7, [\n              _hoisted_8,\n              _createElementVNode(\"span\", {\n                class: \"clear\",\n                onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.showConfirm && _ctx.showConfirm(...args)))\n              }, _hoisted_10)\n            ]),\n            _createVNode(_component_confirm, {\n              ref: \"confirmRef\",\n              text: \"是否清空所有搜索历史\",\n              \"confirm-btn-text\": \"清空\",\n              onConfirm: _ctx.clearSearch\n            }, null, 8, [\"onConfirm\"]),\n            _createVNode(_component_search_list, {\n              searches: _ctx.searchHistory,\n              onSelect: _ctx.addQuery,\n              onDelete: _ctx.deleteSearch\n            }, null, 8, [\"searches\", \"onSelect\", \"onDelete\"])\n          ], 512), [\n            [_vShow, _ctx.searchHistory.length]\n          ])\n        ])\n      ]),\n      _: 1\n    }, 512), [\n      [_vShow, !_ctx.query]\n    ]),\n    _withDirectives(_createElementVNode(\"div\", _hoisted_11, [\n      _createVNode(_component_suggest, {\n        query: _ctx.query,\n        onSelectSong: _ctx.selectSong,\n        onSelectSinger: _ctx.selectSinger\n      }, null, 8, [\"query\", \"onSelectSong\", \"onSelectSinger\"])\n    ], 512), [\n      [_vShow, _ctx.query]\n    ]),\n    _createVNode(_component_router_view, null, {\n      default: _withCtx(({ Component }) => [\n        _createVNode(_Transition, {\n          appear: \"\",\n          name: \"slide\"\n        }, {\n          default: _withCtx(() => [\n            (_openBlock(), _createBlock(_resolveDynamicComponent(Component), { data: _ctx.selectedSinger }, null, 8, [\"data\"]))\n          ]),\n          _: 2\n        }, 1024)\n      ]),\n      _: 1\n    })\n  ]))\n}","import { get } from './base'\r\nimport { Singer, Song } from '@/service/interface'\r\n\r\ninterface HotKeysRes {\r\n  hotKeys: {\r\n    id: number,\r\n    key: string\r\n  }[]\r\n}\r\n\r\ninterface SearchRes {\r\n  hasMore: boolean;\r\n  singer?: Singer;\r\n  songs: Song[];\r\n}\r\n\r\n// 热门搜索\r\nexport const getHotKeys = (): Promise<HotKeysRes> => {\r\n  return new Promise((resolve, reject) => {\r\n    get('/api/getHotKeys')\r\n      .then((res) => {\r\n        resolve(res)\r\n      })\r\n      .catch((err) => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n\r\n// 搜索\r\nexport const search = (query: string, page: number, showSinger: boolean): Promise<SearchRes> => {\r\n  return new Promise((resolve, reject) => {\r\n    get('/api/search', {\r\n      query,\r\n      page,\r\n      showSinger\r\n    })\r\n      .then((res) => {\r\n        resolve(res)\r\n      })\r\n      .catch((err) => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n","import { save, remove, clear } from '@/assets/ts/array-store'\nimport { SEARCH_KEY } from '@/assets/ts/constant'\nimport { useStore } from 'vuex'\nimport * as types from '@/store/mutations-type'\n\nconst useSearchHistory = (): any => {\n  const maxLen = 200\n\n  const store = useStore()\n\n  // 存储搜索历史\n  const saveSearch = (query: string) => {\n    const searches = save(query, SEARCH_KEY, (item) => {\n      return item === query\n    }, maxLen)\n    store.commit(types.SET_SEARCH_HISTORY, searches)\n  }\n\n  // 删除搜索历史\n  const deleteSearch = (query: string) => {\n    const searches = remove(SEARCH_KEY, (item) => {\n      return item === query\n    })\n    store.commit(types.SET_SEARCH_HISTORY, searches)\n  }\n\n  // 清空搜索历史\n  const clearSearch = () => {\n    const searches = clear(SEARCH_KEY)\n    store.commit(types.SET_SEARCH_HISTORY, searches)\n  }\n\n  return {\n    saveSearch,\n    deleteSearch,\n    clearSearch\n  }\n}\n\nexport default useSearchHistory\n","import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vShow as _vShow, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-17ef5ab2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"search-input\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"icon-search\" }, null, -1))\nconst _hoisted_3 = [\"placeholder\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _withDirectives(_createElementVNode(\"input\", {\n      class: \"input-inner\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.query) = $event)),\n      placeholder: _ctx.placeholder\n    }, null, 8, _hoisted_3), [\n      [_vModelText, _ctx.query]\n    ]),\n    _withDirectives(_createElementVNode(\"i\", {\n      class: \"icon-dismiss\",\n      onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.clear && _ctx.clear(...args)))\n    }, null, 512), [\n      [_vShow, _ctx.query]\n    ])\n  ]))\n}","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {number}    delay -          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {boolean}   [noTrailing] -   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset).\n * @param  {Function}  callback -       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {boolean}   [debounceMode] - If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @returns {Function}  A new, throttled, function.\n */\nfunction throttle (delay, noTrailing, callback, debounceMode) {\n  /*\n   * After wrapper has stopped being called, this timeout ensures that\n   * `callback` is executed at the proper times in `throttle` and `end`\n   * debounce modes.\n   */\n  var timeoutID;\n  var cancelled = false; // Keep track of the last time `callback` was executed.\n\n  var lastExec = 0; // Function to clear existing timeout\n\n  function clearExistingTimeout() {\n    if (timeoutID) {\n      clearTimeout(timeoutID);\n    }\n  } // Function to cancel next exec\n\n\n  function cancel() {\n    clearExistingTimeout();\n    cancelled = true;\n  } // `noTrailing` defaults to falsy.\n\n\n  if (typeof noTrailing !== 'boolean') {\n    debounceMode = callback;\n    callback = noTrailing;\n    noTrailing = undefined;\n  }\n  /*\n   * The `wrapper` function encapsulates all of the throttling / debouncing\n   * functionality and when executed will limit the rate at which `callback`\n   * is executed.\n   */\n\n\n  function wrapper() {\n    for (var _len = arguments.length, arguments_ = new Array(_len), _key = 0; _key < _len; _key++) {\n      arguments_[_key] = arguments[_key];\n    }\n\n    var self = this;\n    var elapsed = Date.now() - lastExec;\n\n    if (cancelled) {\n      return;\n    } // Execute `callback` and update the `lastExec` timestamp.\n\n\n    function exec() {\n      lastExec = Date.now();\n      callback.apply(self, arguments_);\n    }\n    /*\n     * If `debounceMode` is true (at begin) this is used to clear the flag\n     * to allow future `callback` executions.\n     */\n\n\n    function clear() {\n      timeoutID = undefined;\n    }\n\n    if (debounceMode && !timeoutID) {\n      /*\n       * Since `wrapper` is being called for the first time and\n       * `debounceMode` is true (at begin), execute `callback`.\n       */\n      exec();\n    }\n\n    clearExistingTimeout();\n\n    if (debounceMode === undefined && elapsed > delay) {\n      /*\n       * In throttle mode, if `delay` time has been exceeded, execute\n       * `callback`.\n       */\n      exec();\n    } else if (noTrailing !== true) {\n      /*\n       * In trailing throttle mode, since `delay` time has not been\n       * exceeded, schedule `callback` to execute `delay` ms after most\n       * recent execution.\n       *\n       * If `debounceMode` is true (at begin), schedule `clear` to execute\n       * after `delay` ms.\n       *\n       * If `debounceMode` is false (at end), schedule `callback` to\n       * execute after `delay` ms.\n       */\n      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n    }\n  }\n\n  wrapper.cancel = cancel; // Return the wrapper function.\n\n  return wrapper;\n}\n\n/* eslint-disable no-undefined */\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {number}   delay -         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {boolean}  [atBegin] -     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback -      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @returns {Function} A new, debounced function.\n */\n\nfunction debounce (delay, atBegin, callback) {\n  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);\n}\n\nexport { debounce, throttle };\n//# sourceMappingURL=index.js.map\n","\r\nimport { defineComponent, ref, watch } from 'vue'\r\nimport { debounce } from 'throttle-debounce'\r\n\r\nexport default defineComponent({\r\n  name: 'search-input',\r\n  props: {\r\n    modelValue: String,\r\n    placeholder: {\r\n      type: String,\r\n      default: '搜索歌曲、歌手'\r\n    }\r\n  },\r\n  setup (props, { emit }) {\r\n    const query = ref<string | undefined>(props.modelValue)\r\n    const clear = () => {\r\n      query.value = ''\r\n    }\r\n\r\n    watch(() => props.modelValue, (newVal) => {\r\n      query.value = newVal\r\n    })\r\n    // 监听输入框的值，更新后同步到组件model上\r\n    watch(\r\n      () => query.value,\r\n      debounce(500, (newQuery: string) => {\r\n        emit('update:modelValue', newQuery.trim())\r\n      })\r\n    )\r\n\r\n    return {\r\n      query,\r\n      clear\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./search-input.vue?vue&type=template&id=17ef5ab2&scoped=true&ts=true\"\nimport script from \"./search-input.vue?vue&type=script&lang=ts\"\nexport * from \"./search-input.vue?vue&type=script&lang=ts\"\n\nimport \"./search-input.vue?vue&type=style&index=0&id=17ef5ab2&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/v_ylqian/Desktop/vue3/vue3-music-next/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-17ef5ab2\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode, TransitionGroup as _TransitionGroup, withCtx as _withCtx, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-05a37a71\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"search-list\" }\nconst _hoisted_2 = [\"onClick\"]\nconst _hoisted_3 = { class: \"text\" }\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"icon-delete\" }, null, -1))\nconst _hoisted_6 = [\n  _hoisted_5\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_TransitionGroup, {\n      name: \"list\",\n      tag: \"ul\"\n    }, {\n      default: _withCtx(() => [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.searches, (item) => {\n          return (_openBlock(), _createElementBlock(\"li\", {\n            key: item,\n            class: \"search-item\",\n            onClick: ($event: any) => (_ctx.selectItem(item))\n          }, [\n            _createElementVNode(\"span\", _hoisted_3, _toDisplayString(item), 1),\n            (_ctx.showDelete)\n              ? (_openBlock(), _createElementBlock(\"span\", {\n                  key: 0,\n                  class: \"icon\",\n                  onClick: _withModifiers(($event: any) => (_ctx.deleteItem(item)), [\"stop\"])\n                }, _hoisted_6, 8, _hoisted_4))\n              : _createCommentVNode(\"\", true)\n          ], 8, _hoisted_2))\n        }), 128))\n      ]),\n      _: 1\n    })\n  ]))\n}","\nimport { defineComponent, PropType } from 'vue'\nexport default defineComponent({\n  name: 'search-list',\n  props: {\n    searches: {\n      type: Array as PropType<Array<any>>,\n      default: () => []\n    },\n    showDelete: {\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: ['select', 'delete'],\n  setup (props, { emit }) {\n    const selectItem = (item: any) => {\n      emit('select', item)\n    }\n    const deleteItem = (item: any) => {\n      emit('delete', item)\n    }\n    return {\n      selectItem,\n      deleteItem\n    }\n  }\n})\n","import { render } from \"./search-list.vue?vue&type=template&id=05a37a71&scoped=true&ts=true\"\nimport script from \"./search-list.vue?vue&type=script&lang=ts\"\nexport * from \"./search-list.vue?vue&type=script&lang=ts\"\n\nimport \"./search-list.vue?vue&type=style&index=0&id=05a37a71&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/v_ylqian/Desktop/vue3/vue3-music-next/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-05a37a71\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, Teleport as _Teleport, openBlock as _openBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4a9b8466\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"confirm\" }\nconst _hoisted_2 = { class: \"confirm-wrapper\" }\nconst _hoisted_3 = { class: \"confirm-content\" }\nconst _hoisted_4 = { class: \"text\" }\nconst _hoisted_5 = { class: \"operate\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createBlock(_Teleport, { to: \"body\" }, [\n    _createVNode(_Transition, { name: \"confirm-fade\" }, {\n      default: _withCtx(() => [\n        _withDirectives(_createElementVNode(\"div\", _hoisted_1, [\n          _createElementVNode(\"div\", _hoisted_2, [\n            _createElementVNode(\"div\", _hoisted_3, [\n              _createElementVNode(\"p\", _hoisted_4, _toDisplayString(_ctx.text), 1),\n              _createElementVNode(\"div\", _hoisted_5, [\n                _createElementVNode(\"div\", {\n                  class: \"operate-btn left\",\n                  onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.confirm && _ctx.confirm(...args)))\n                }, _toDisplayString(_ctx.confirmBtnText), 1),\n                _createElementVNode(\"div\", {\n                  class: \"operate-btn\",\n                  onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.cancel && _ctx.cancel(...args)))\n                }, _toDisplayString(_ctx.cancelBtnText), 1)\n              ])\n            ])\n          ])\n        ], 512), [\n          [_vShow, _ctx.visible]\n        ])\n      ]),\n      _: 1\n    })\n  ]))\n}","\r\nimport { defineComponent, ref } from 'vue'\r\nexport default defineComponent({\r\n  name: 'confirm',\r\n  props: {\r\n    text: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    confirmBtnText: {\r\n      type: String,\r\n      default: '确定'\r\n    },\r\n    cancelBtnText: {\r\n      type: String,\r\n      default: '取消'\r\n    }\r\n  },\r\n  emits: ['confirm', 'cancel'],\r\n  setup (props, { emit }) {\r\n    const visible = ref<boolean>(false)\r\n    const confirm = () => {\r\n      hide()\r\n      emit('confirm')\r\n    }\r\n    const cancel = () => {\r\n      hide()\r\n      emit('cancel')\r\n    }\r\n    const hide = () => {\r\n      visible.value = false\r\n    }\r\n    const show = () => {\r\n      visible.value = true\r\n    }\r\n    return {\r\n      visible,\r\n      confirm,\r\n      cancel,\r\n      hide,\r\n      show\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./confirm.vue?vue&type=template&id=4a9b8466&scoped=true&ts=true\"\nimport script from \"./confirm.vue?vue&type=script&lang=ts\"\nexport * from \"./confirm.vue?vue&type=script&lang=ts\"\n\nimport \"./confirm.vue?vue&type=style&index=0&id=4a9b8466&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/v_ylqian/Desktop/vue3/vue3-music-next/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4a9b8466\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, resolveDirective as _resolveDirective, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-514ac2cc\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"rootRef\",\n  class: \"suggest\"\n}\nconst _hoisted_2 = { class: \"suggest-list\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"icon\" }, [\n  /*#__PURE__*/_createElementVNode(\"i\", { class: \"icon-mine\" })\n], -1))\nconst _hoisted_4 = { class: \"name\" }\nconst _hoisted_5 = { class: \"text\" }\nconst _hoisted_6 = [\"onClick\"]\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"icon\" }, [\n  /*#__PURE__*/_createElementVNode(\"i\", { class: \"icon-music\" })\n], -1))\nconst _hoisted_8 = { class: \"name\" }\nconst _hoisted_9 = { class: \"text\" }\nconst _hoisted_10 = { class: \"suggest-item\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _directive_loading = _resolveDirective(\"loading\")!\n  const _directive_no_result = _resolveDirective(\"no-result\")!\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"ul\", _hoisted_2, [\n      (_ctx.singer)\n        ? (_openBlock(), _createElementBlock(\"li\", {\n            key: 0,\n            class: \"suggest-item\",\n            onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.selectSinger(_ctx.singer)))\n          }, [\n            _hoisted_3,\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createElementVNode(\"p\", _hoisted_5, _toDisplayString(_ctx.singer.name), 1)\n            ])\n          ]))\n        : _createCommentVNode(\"\", true),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.songs, (song) => {\n        return (_openBlock(), _createElementBlock(\"li\", {\n          class: \"suggest-item\",\n          key: song.id,\n          onClick: ($event: any) => (_ctx.selectSong(song))\n        }, [\n          _hoisted_7,\n          _createElementVNode(\"div\", _hoisted_8, [\n            _createElementVNode(\"p\", _hoisted_9, _toDisplayString(song.singer) + \"-\" + _toDisplayString(song.name), 1)\n          ])\n        ], 8, _hoisted_6))\n      }), 128)),\n      _withDirectives(_createElementVNode(\"div\", _hoisted_10, null, 512), [\n        [_directive_loading, _ctx.pullUpLoading, _ctx.loadingText]\n      ])\n    ])\n  ])), [\n    [_directive_loading, _ctx.loading, _ctx.loadingText],\n    [_directive_no_result, _ctx.noResult, _ctx.noResultText]\n  ])\n}","/*!\n * better-scroll / pull-up\n * (c) 2016-2021 ustbhuangyi\n * Released under the MIT License.\n */\n// ssr support\r\nvar inBrowser = typeof window !== 'undefined';\r\nvar ua = inBrowser && navigator.userAgent.toLowerCase();\r\n!!(ua && /wechatdevtools/.test(ua));\r\nua && ua.indexOf('android') > 0;\r\n/* istanbul ignore next */\r\n((function () {\r\n    if (typeof ua === 'string') {\r\n        var regex = /os (\\d\\d?_\\d(_\\d)?)/;\r\n        var matches = regex.exec(ua);\r\n        if (!matches)\r\n            return false;\r\n        var parts = matches[1].split('_').map(function (item) {\r\n            return parseInt(item, 10);\r\n        });\r\n        // ios version >= 13.4 issue 982\r\n        return !!(parts[0] === 13 && parts[1] >= 4);\r\n    }\r\n    return false;\r\n}))();\r\n/* istanbul ignore next */\r\nvar supportsPassive = false;\r\n/* istanbul ignore next */\r\nif (inBrowser) {\r\n    var EventName = 'test-passive';\r\n    try {\r\n        var opts = {};\r\n        Object.defineProperty(opts, 'passive', {\r\n            get: function () {\r\n                supportsPassive = true;\r\n            },\r\n        }); // https://github.com/facebook/flow/issues/285\r\n        window.addEventListener(EventName, function () { }, opts);\r\n    }\r\n    catch (e) { }\r\n}\n\nvar extend = function (target, source) {\r\n    for (var key in source) {\r\n        target[key] = source[key];\r\n    }\r\n    return target;\r\n};\n\nvar elementStyle = (inBrowser &&\r\n    document.createElement('div').style);\r\nvar vendor = (function () {\r\n    /* istanbul ignore if  */\r\n    if (!inBrowser) {\r\n        return false;\r\n    }\r\n    var transformNames = [\r\n        {\r\n            key: 'standard',\r\n            value: 'transform',\r\n        },\r\n        {\r\n            key: 'webkit',\r\n            value: 'webkitTransform',\r\n        },\r\n        {\r\n            key: 'Moz',\r\n            value: 'MozTransform',\r\n        },\r\n        {\r\n            key: 'O',\r\n            value: 'OTransform',\r\n        },\r\n        {\r\n            key: 'ms',\r\n            value: 'msTransform',\r\n        },\r\n    ];\r\n    for (var _i = 0, transformNames_1 = transformNames; _i < transformNames_1.length; _i++) {\r\n        var obj = transformNames_1[_i];\r\n        if (elementStyle[obj.value] !== undefined) {\r\n            return obj.key;\r\n        }\r\n    }\r\n    /* istanbul ignore next  */\r\n    return false;\r\n})();\r\n/* istanbul ignore next  */\r\nfunction prefixStyle(style) {\r\n    if (vendor === false) {\r\n        return style;\r\n    }\r\n    if (vendor === 'standard') {\r\n        if (style === 'transitionEnd') {\r\n            return 'transitionend';\r\n        }\r\n        return style;\r\n    }\r\n    return vendor + style.charAt(0).toUpperCase() + style.substr(1);\r\n}\r\nvendor && vendor !== 'standard' ? '-' + vendor.toLowerCase() + '-' : '';\r\nvar transform = prefixStyle('transform');\r\nvar transition = prefixStyle('transition');\r\ninBrowser && prefixStyle('perspective') in elementStyle;\r\n({\r\n    transform: transform,\r\n    transition: transition,\r\n    transitionTimingFunction: prefixStyle('transitionTimingFunction'),\r\n    transitionDuration: prefixStyle('transitionDuration'),\r\n    transitionDelay: prefixStyle('transitionDelay'),\r\n    transformOrigin: prefixStyle('transformOrigin'),\r\n    transitionEnd: prefixStyle('transitionEnd'),\r\n    transitionProperty: prefixStyle('transitionProperty'),\r\n});\n\nvar sourcePrefix = 'plugins.pullUpLoad';\r\nvar propertiesMap = [\r\n    {\r\n        key: 'finishPullUp',\r\n        name: 'finishPullUp'\r\n    },\r\n    {\r\n        key: 'openPullUp',\r\n        name: 'openPullUp'\r\n    },\r\n    {\r\n        key: 'closePullUp',\r\n        name: 'closePullUp'\r\n    },\r\n    {\r\n        key: 'autoPullUpLoad',\r\n        name: 'autoPullUpLoad'\r\n    }\r\n];\r\nvar propertiesConfig = propertiesMap.map(function (item) {\r\n    return {\r\n        key: item.key,\r\n        sourceKey: sourcePrefix + \".\" + item.name\r\n    };\r\n});\n\nvar PULL_UP_HOOKS_NAME = 'pullingUp';\r\nvar PullUp = /** @class */ (function () {\r\n    function PullUp(scroll) {\r\n        this.scroll = scroll;\r\n        this.pulling = false;\r\n        this.watching = false;\r\n        this.init();\r\n    }\r\n    PullUp.prototype.init = function () {\r\n        this.handleBScroll();\r\n        this.handleOptions(this.scroll.options.pullUpLoad);\r\n        this.handleHooks();\r\n        this.watch();\r\n    };\r\n    PullUp.prototype.handleBScroll = function () {\r\n        this.scroll.registerType([PULL_UP_HOOKS_NAME]);\r\n        this.scroll.proxy(propertiesConfig);\r\n    };\r\n    PullUp.prototype.handleOptions = function (userOptions) {\r\n        if (userOptions === void 0) { userOptions = {}; }\r\n        userOptions = (userOptions === true ? {} : userOptions);\r\n        var defaultOptions = {\r\n            threshold: 0,\r\n        };\r\n        this.options = extend(defaultOptions, userOptions);\r\n        this.scroll.options.probeType = 3 /* Realtime */;\r\n    };\r\n    PullUp.prototype.handleHooks = function () {\r\n        var _this = this;\r\n        this.hooksFn = [];\r\n        var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\r\n        this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.contentChanged, function () {\r\n            _this.finishPullUp();\r\n        });\r\n        this.registerHooks(scrollBehaviorY.hooks, scrollBehaviorY.hooks.eventTypes.computeBoundary, function (boundary) {\r\n            // content is smaller than wrapper\r\n            if (boundary.maxScrollPos > 0) {\r\n                // allow scrolling when content is not full of wrapper\r\n                boundary.maxScrollPos = -1;\r\n            }\r\n        });\r\n    };\r\n    PullUp.prototype.registerHooks = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksFn.push([hooks, name, handler]);\r\n    };\r\n    PullUp.prototype.watch = function () {\r\n        if (this.watching) {\r\n            return;\r\n        }\r\n        this.watching = true;\r\n        this.registerHooks(this.scroll, this.scroll.eventTypes.scroll, this.checkPullUp);\r\n    };\r\n    PullUp.prototype.unwatch = function () {\r\n        this.watching = false;\r\n        this.scroll.off(this.scroll.eventTypes.scroll, this.checkPullUp);\r\n    };\r\n    PullUp.prototype.checkPullUp = function (pos) {\r\n        var _this = this;\r\n        var threshold = this.options.threshold;\r\n        if (this.scroll.movingDirectionY === 1 /* Positive */ &&\r\n            pos.y <= this.scroll.maxScrollY + threshold) {\r\n            this.pulling = true;\r\n            // must reset pulling after scrollEnd\r\n            this.scroll.once(this.scroll.eventTypes.scrollEnd, function () {\r\n                _this.pulling = false;\r\n            });\r\n            this.unwatch();\r\n            this.scroll.trigger(PULL_UP_HOOKS_NAME);\r\n        }\r\n    };\r\n    PullUp.prototype.finishPullUp = function () {\r\n        var _this = this;\r\n        // reset Direction, fix #936\r\n        this.scroll.scroller.scrollBehaviorY.setMovingDirection(0 /* Default */);\r\n        if (this.pulling) {\r\n            this.scroll.once(this.scroll.eventTypes.scrollEnd, function () {\r\n                _this.watch();\r\n            });\r\n        }\r\n        else {\r\n            this.watch();\r\n        }\r\n    };\r\n    // allow 'true' type is compat for beta version implements\r\n    PullUp.prototype.openPullUp = function (config) {\r\n        if (config === void 0) { config = {}; }\r\n        this.handleOptions(config);\r\n        this.watch();\r\n    };\r\n    PullUp.prototype.closePullUp = function () {\r\n        this.unwatch();\r\n    };\r\n    PullUp.prototype.autoPullUpLoad = function () {\r\n        var threshold = this.options.threshold;\r\n        var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\r\n        if (this.pulling || !this.watching) {\r\n            return;\r\n        }\r\n        // simulate a pullUp action\r\n        var NEGATIVE_VALUE = -1;\r\n        var outOfBoundaryPos = scrollBehaviorY.maxScrollPos + threshold + NEGATIVE_VALUE;\r\n        this.scroll.scroller.scrollBehaviorY.setMovingDirection(NEGATIVE_VALUE);\r\n        this.scroll.scrollTo(this.scroll.x, outOfBoundaryPos, this.scroll.options.bounceTime);\r\n    };\r\n    PullUp.pluginName = 'pullUpLoad';\r\n    return PullUp;\r\n}());\n\nexport default PullUp;\n","import BScroll from '@better-scroll/core'\nimport PullUp from '@better-scroll/pull-up'\nimport ObserveDOM from '@better-scroll/slide'\nimport { ref, onMounted, onUnmounted, onActivated, onDeactivated } from 'vue'\n\nBScroll.use(PullUp)\nBScroll.use(ObserveDOM)\n\ninterface RequestData {\n  (): any\n}\nconst usePullUpLoad = (requestData: RequestData, preventPullUpLoad: any): any => {\n  const scroll = ref<any>(null)\n  const rootRef = ref<any>(null)\n  const isPullUpLoad = ref(false)\n  onMounted(() => {\n    const scrollVal = scroll.value = new BScroll(rootRef.value, {\n      pullUpLoad: true,\n      observeDOM: true,\n      click: true\n    })\n\n    const pullingUpHandler = async () => {\n      if (preventPullUpLoad.value) {\n        scrollVal.finishPullUp()\n        return\n      }\n      isPullUpLoad.value = true\n      await requestData()\n      scrollVal.finishPullUp()\n      scrollVal.refresh()\n      isPullUpLoad.value = false\n    }\n    scrollVal.on('pullingUp', pullingUpHandler)\n  })\n\n  onUnmounted(() => {\n    scroll.value.destroy()\n  })\n\n  onActivated(() => {\n    scroll.value.enable()\n    scroll.value.refresh()\n  })\n\n  onDeactivated(() => {\n    scroll.value.disable()\n  })\n\n  return {\n    scroll,\n    rootRef,\n    isPullUpLoad\n  }\n}\n\nexport default usePullUpLoad\n","\nimport { defineComponent, watch, ref, computed, nextTick } from 'vue'\nimport { search } from '@/service/search'\nimport { processSongs } from '@/service/song'\nimport { Singer, Song } from '@/service/interface'\nimport usePullUpLoad from './use-pull-up-load'\n\nexport default defineComponent({\n  name: 'suggest',\n  props: {\n    query: String, // 搜索val\n    showSinger: {\n      // 是否显示歌手\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: ['select-song', 'select-singer'],\n  setup (props, { emit }) {\n    const songs = ref<Array<Song>>([]) // 歌曲\n    const singer = ref<any>(null) // 歌手\n    const hasMore = ref<boolean>(true) // 是否还有更多可搜索\n    const page = ref<number>(1) // 用于搜索更多\n    const loadingText = ref<string>('')\n    const noResultText = ref<string>('抱歉，暂无搜索结果')\n    const manualLoading = ref<boolean>(false) // 手动加载更多\n\n    const loading = computed(() => {\n      return !singer.value && !songs.value.length\n    })\n    // 无结果\n    const noResult = computed(() => {\n      return !singer.value && !songs.value.length && !hasMore.value\n    })\n    // 加载中\n    const pullUpLoading = computed(() => {\n      return isPullUpLoad.value && hasMore.value\n    })\n    // 防多次调用\n    const preventPullUpLoad = computed(() => {\n      return loading.value || manualLoading.value\n    })\n\n    const { isPullUpLoad, rootRef, scroll } = usePullUpLoad(\n      searchMore,\n      preventPullUpLoad\n    )\n    // 监听需要搜索的val是否改变\n    watch(\n      () => props.query,\n      async (newQuery) => {\n        if (!newQuery) {\n          return\n        }\n        await searchFirst()\n      }\n    )\n\n    // 搜索\n    const searchFirst = async () => {\n      if (!props.query) {\n        return\n      }\n      // 首次搜索时初始化\n      page.value = 1\n      songs.value = []\n      singer.value = null\n      hasMore.value = true\n      // 搜索结果\n      const result = await search(props.query, page.value, props.showSinger)\n      // 处理歌曲播放url数据\n      songs.value = await processSongs(result.songs)\n      singer.value = result.singer\n      hasMore.value = result.hasMore\n      await nextTick()\n      await makeItScrollable()\n    }\n    // 搜索更多\n    async function searchMore () {\n      if (!hasMore.value || !props.query) {\n        return\n      }\n      page.value++\n      const result = await search(props.query, page.value, props.showSinger)\n      songs.value = songs.value.concat(await processSongs(result.songs))\n      hasMore.value = result.hasMore\n      await nextTick()\n      debugger\n      await makeItScrollable()\n    }\n\n    const makeItScrollable = async () => {\n      if (scroll.value.maxScrollY >= -1) {\n        manualLoading.value = true\n        await searchMore()\n        manualLoading.value = false\n      }\n    }\n    // 点击歌手\n    const selectSinger = (singer: Singer) => {\n      emit('select-singer', singer)\n    }\n    // 点击歌曲\n    const selectSong = (song: Song) => {\n      emit('select-song', song)\n    }\n\n    return {\n      songs,\n      singer,\n      loadingText,\n      pullUpLoading,\n      noResultText,\n      loading,\n      noResult,\n      selectSinger,\n      selectSong,\n      rootRef\n    }\n  }\n})\n","import { render } from \"./suggest.vue?vue&type=template&id=514ac2cc&scoped=true&ts=true\"\nimport script from \"./suggest.vue?vue&type=script&lang=ts\"\nexport * from \"./suggest.vue?vue&type=script&lang=ts\"\n\nimport \"./suggest.vue?vue&type=style&index=0&id=514ac2cc&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/v_ylqian/Desktop/vue3/vue3-music-next/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-514ac2cc\"]])\n\nexport default __exports__","\nimport {\n  defineComponent,\n  reactive,\n  computed,\n  toRefs,\n  ref,\n  watch,\n  nextTick\n} from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { getHotKeys } from '@/service/search'\nimport useSearchHistory from '@/components/search/use-search-history'\nimport { Song, Singer } from '@/service/interface'\nimport { SINGER_KEY } from '@/assets/ts/constant'\nimport { cache } from '@/assets/ts/array-store'\nimport SearchInput from '@/components/search/search-input.vue'\nimport SearchList from '@/components/base/search-list/search-list.vue'\nimport Confirm from '@/components/base/confirm/confirm.vue'\nimport Scroll from '@/components/wrap-scroll'\nimport Suggest from '@/components/search/suggest.vue'\ninterface State {\n  hotKeys: {\n    [key: string]: any\n  }\n  query: string\n}\n\nexport default defineComponent({\n  name: 'search',\n  components: {\n    SearchInput,\n    SearchList,\n    Confirm,\n    Scroll,\n    Suggest\n  },\n  setup () {\n    const store = useStore()\n    const router = useRouter()\n    const searchHistory = computed(() => store.state.searchHistory)\n\n    const state = reactive({\n      hotKeys: [],\n      query: ''\n    }) as State\n\n    const scrollRef = ref<any>(null)\n    const confirmRef = ref<any>(null)\n    const selectedSinger = ref<any>(null)\n    const { saveSearch, deleteSearch, clearSearch } = useSearchHistory()\n\n    // 热门搜索\n    const getHotKeysApi = async () => {\n      const result = await getHotKeys()\n      state.hotKeys = result?.hotKeys\n    }\n    getHotKeysApi()\n\n    watch(\n      () => state.query,\n      async (newQuery) => {\n        if (!newQuery) {\n          await nextTick()\n          refreshScroll()\n        }\n      }\n    )\n\n    const refreshScroll = () => {\n      scrollRef.value.scroll.refresh()\n    }\n    // 点击标签查询\n    const addQuery = (val: string) => {\n      state.query = val\n    }\n    // 点击歌曲\n    const selectSong = (song: Song) => {\n      saveSearch(state.query)\n      // store.dispatch('addSong', song)\n    }\n    // 点击歌手\n    const selectSinger = (singer: Singer) => {\n      saveSearch(state.query)\n      selectedSinger.value = singer\n      cache(SINGER_KEY, singer)\n\n      router.push({\n        path: `/search/${singer.mid}`\n      })\n    }\n    // 弹窗提示\n    const showConfirm = () => {\n      confirmRef.value.show()\n    }\n\n    return {\n      ...toRefs(state),\n      searchHistory,\n      scrollRef,\n      confirmRef,\n      selectedSinger,\n      addQuery,\n      showConfirm,\n      deleteSearch,\n      clearSearch,\n      selectSong,\n      selectSinger\n    }\n  }\n})\n","import { render } from \"./search.vue?vue&type=template&id=1f517b37&scoped=true&ts=true\"\nimport script from \"./search.vue?vue&type=script&lang=ts\"\nexport * from \"./search.vue?vue&type=script&lang=ts\"\n\nimport \"./search.vue?vue&type=style&index=0&id=1f517b37&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/v_ylqian/Desktop/vue3/vue3-music-next/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1f517b37\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./search-input.vue?vue&type=style&index=0&id=17ef5ab2&lang=scss&scoped=true\"","// 对 Scroll 组件的扩展\nimport { h, mergeProps, renderSlot, withCtx, ref, computed } from 'vue'\nimport Scroll from '@/components/base/scroll/scroll.vue'\n\nexport default {\n  name: 'wrap-scroll',\n  props: Scroll.props,\n  emits: Scroll.emits,\n  render (ctx: any) {\n    // mergeProps将包含 VNode prop 的多个对象合并为一个单独的对象。其返回的是一个新创建的对象，而作为参数传递的对象则不会被修改\n    return h(\n      Scroll,\n      mergeProps(\n        {\n          ref: 'scrollRef'\n        },\n        ctx.$props, // 添加方法，props 本来就是一个对象，所以不用大括号括起来\n        {\n          onScroll: (pos: { x: number; y: number }) => {\n            // 创建监听函数，监听滚动事件\n            ctx.$emit('scroll', pos)\n          }\n        }\n      ),\n      {\n        default: withCtx(() => {\n          // 此处用法暂未明白，看视频了解详情后补充\n          return [renderSlot(ctx.$slots, 'default')]\n        })\n      }\n    )\n  },\n  setup () {\n    const scrollRef = ref<any>(null)\n    const scroll = computed(() => {\n      return scrollRef.value.scroll\n    })\n\n    return {\n      scrollRef,\n      scroll\n    }\n  }\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./search-list.vue?vue&type=style&index=0&id=05a37a71&lang=scss&scoped=true\"","var PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./confirm.vue?vue&type=style&index=0&id=4a9b8466&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./search.vue?vue&type=style&index=0&id=1f517b37&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./suggest.vue?vue&type=style&index=0&id=514ac2cc&lang=scss&scoped=true\""],"sourceRoot":""}