(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["singer"],{"019d":function(t,e,n){"use strict";n.r(e);var c=n("7a23"),r={class:"singer-detail"};function o(t,e,n,o,u,i){var a=Object(c["G"])("music-list");return Object(c["y"])(),Object(c["j"])("div",r,[Object(c["l"])(a,{songs:t.songs,title:t.title,pic:t.pic,loading:t.loading},null,8,["songs","title","pic","loading"])])}var u=n("f82a"),i=n("33a5"),a=n("c81b"),l=Object(c["m"])(Object(u["a"])("singer-detail",a["e"],i["a"])),s=(n("03c6"),n("d959")),f=n.n(s);const b=f()(l,[["render",o],["__scopeId","data-v-14e0c74b"]]);e["default"]=b},"01b5":function(t,e,n){},"03c6":function(t,e,n){"use strict";n("539d")},"1f23":function(t,e,n){"use strict";n.r(e);var c=n("7a23"),r={class:"singer"};function o(t,e,n,o,u,i){var a=Object(c["G"])("singer-list"),l=Object(c["G"])("router-view"),s=Object(c["H"])("loading");return Object(c["S"])((Object(c["y"])(),Object(c["j"])("div",r,[Object(c["l"])(a,{data:t.singers,onSelect:t.selectSinger},null,8,["data","onSelect"]),Object(c["l"])(l,null,{default:Object(c["R"])((function(e){var n=e.Component;return[Object(c["l"])(c["d"],{appear:"",name:"slide"},{default:Object(c["R"])((function(){return[(Object(c["y"])(),Object(c["h"])(Object(c["I"])(n),{data:t.selectedSinger},null,8,["data"]))]})),_:2},1024)]})),_:1})])),[[s,!t.singers.length]])}var u=n("5530"),i=n("6c02"),a=n("33a5"),l=n("c81b"),s=n("f2a5"),f=(n("b0c0"),{ref:"groupRef"}),b={class:"title"},d=["onClick"],j={class:"avatar"},O={class:"name"},v={class:"fixed-title"},h=["data-index"];function p(t,e,n,r,o,u){var i=Object(c["G"])("scroll"),a=Object(c["H"])("lazy");return Object(c["y"])(),Object(c["h"])(i,{class:"singer-list","probe-type":3,onScroll:t.onScroll,ref:"scrollRef"},{default:Object(c["R"])((function(){return[Object(c["k"])("ul",f,[(Object(c["y"])(!0),Object(c["j"])(c["a"],null,Object(c["E"])(t.data,(function(e){return Object(c["y"])(),Object(c["j"])("li",{key:e.title,class:"group"},[Object(c["k"])("h2",b,Object(c["K"])(e.title),1),Object(c["k"])("ul",null,[(Object(c["y"])(!0),Object(c["j"])(c["a"],null,Object(c["E"])(e.list,(function(e){return Object(c["y"])(),Object(c["j"])("li",{key:e.id,class:"item",onClick:function(n){return t.onItemClick(e)}},[Object(c["S"])(Object(c["k"])("img",j,null,512),[[a,e.pic]]),Object(c["k"])("span",O,Object(c["K"])(e.name),1)],8,d)})),128))])])})),128))],512),Object(c["S"])(Object(c["k"])("div",{class:"fixed",style:Object(c["t"])(t.fixedStyle)},[Object(c["k"])("div",v,Object(c["K"])(t.fixedTitle),1)],4),[[c["P"],t.fixedTitle]]),Object(c["k"])("div",{class:"shortcut",onTouchstart:e[0]||(e[0]=Object(c["T"])((function(){return t.onShortcutTouchStart&&t.onShortcutTouchStart.apply(t,arguments)}),["stop","prevent"])),onTouchmove:e[1]||(e[1]=Object(c["T"])((function(){return t.onShortcutTouchMove&&t.onShortcutTouchMove.apply(t,arguments)}),["stop","prevent"])),onTouchend:e[2]||(e[2]=Object(c["T"])((function(){}),["stop","prevent"]))},[Object(c["k"])("ul",null,[(Object(c["y"])(!0),Object(c["j"])(c["a"],null,Object(c["E"])(t.shortcutList,(function(e,n){return Object(c["y"])(),Object(c["j"])("li",{key:e,"data-index":n,class:Object(c["s"])(["item",{current:t.currentIndex===n}])},Object(c["K"])(e),11,h)})),128))])],32)]})),_:1},8,["onScroll"])}var g=n("953a"),S=n("1da1"),m=(n("96cf"),function(t){var e=30,n=Object(c["D"])(null),r=Object(c["D"])(0),o=Object(c["f"])((function(){var e;return r.value<0?"":(null===(e=t.data[a.value])||void 0===e?void 0:e.title)||""})),u=Object(c["f"])((function(){var t=l.value,n=t<e?t-e:0;return{transform:"translate3d(0, ".concat(n,"px, 0)")}})),i=Object(c["D"])([]),a=Object(c["D"])(0),l=Object(c["D"])(0);Object(c["Q"])((function(){return t.data}),Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["r"])();case 2:s();case 3:case"end":return t.stop()}}),t)})))),Object(c["Q"])((function(){return r.value}),(function(t){var e=i.value;if(t<0)a.value=0;else if(t>e[e.length-2])a.value=e.length-2;else for(var n=0;n<e.length-1;n++){var c=e[n],r=e[n+1];t>=c&&t<=r&&(a.value=n,l.value=r-t)}}));var s=function(){i.value=[];var t=n.value.children,e=0;i.value.push(e);for(var c=0;c<t.length;c++)e+=t[c].clientHeight,i.value.push(e)},f=function(t){r.value=-t.y};return{groupRef:n,fixedTitle:o,fixedStyle:u,currentIndex:a,onScroll:f}}),y=m,x=(n("d81d"),function(t,e){var n=Object(c["D"])(null),r=18,o=Object(c["f"])((function(){return t.data.map((function(t){return t.title}))})),u={y1:0,y2:0,anchorIndex:0},i=function(t){var e=parseInt(t.target.dataset.index);u.y1=t.touches[0].pageY,u.anchorIndex=e,l(e)},a=function(t){u.y2=t.touches[0].pageY;var e=(u.y2-u.y1)/r|0,n=u.anchorIndex+e;l(n)},l=function(t){if(!isNaN(t)){t=Math.max(0,Math.min(o.value.length-1,t));var c=n.value.scroll,r=e.value.children[t];c.scrollToElement(r,0)}};return{shortcutList:o,scrollRef:n,onShortcutTouchStart:i,onShortcutTouchMove:a}}),T=x,k=Object(c["m"])({name:"singer-list",components:{Scroll:g["a"]},props:{data:{type:Array,default:function(){return[]}}},emits:["select"],setup:function(t,e){var n=e.emit,c=y(t),r=c.groupRef,o=c.fixedTitle,u=c.fixedStyle,i=c.currentIndex,a=c.onScroll,l=T(t,r),s=l.shortcutList,f=l.scrollRef,b=l.onShortcutTouchStart,d=l.onShortcutTouchMove,j=function(t){n("select",t)};return{onItemClick:j,groupRef:r,fixedTitle:o,fixedStyle:u,currentIndex:i,onScroll:a,shortcutList:s,scrollRef:f,onShortcutTouchStart:b,onShortcutTouchMove:d}}}),I=(n("413d"),n("d959")),R=n.n(I);const w=R()(k,[["render",p],["__scopeId","data-v-0058d527"]]);var _=w,M=Object(c["m"])({name:"singer",components:{SingerList:_},setup:function(){var t=Object(i["d"])(),e=Object(c["C"])({singers:[],selectedSinger:{}}),n=function(){Object(a["b"])().then((function(t){e.singers=t.singers}))};n();var r=function(n){e.selectedSinger=n,Object(s["a"])(l["e"],n),t.push({path:"/singer/".concat(n.mid)})};return Object(u["a"])(Object(u["a"])({},Object(c["M"])(e)),{},{selectSinger:r})}});n("5bfe");const D=R()(M,[["render",o],["__scopeId","data-v-083f4028"]]);e["default"]=D},"33a5":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));n("d3b7");var c=n("2ff6"),r=function(){return new Promise((function(t,e){Object(c["a"])("/api/getSingerList").then((function(e){t(e)})).catch((function(t){e(t)}))}))},o=function(t){return new Promise((function(e,n){Object(c["a"])("/api/getSingerDetail",{mid:t.mid}).then((function(t){e(t)})).catch((function(t){n(t)}))}))}},"413d":function(t,e,n){"use strict";n("01b5")},"539d":function(t,e,n){},"5bfe":function(t,e,n){"use strict";n("9942")},9942:function(t,e,n){}}]);
//# sourceMappingURL=singer.ca9327e9.js.map