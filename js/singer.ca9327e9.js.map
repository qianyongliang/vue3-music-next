{"version":3,"sources":["webpack:///./src/views/singer/singer-detail.vue?f9c0","webpack:///./src/views/singer/singer-detail.vue","webpack:///./src/views/singer/singer-detail.vue?9ef4","webpack:///./src/views/singer/singer-detail.vue?27c6","webpack:///./src/views/singer/singer.vue?879a","webpack:///./src/components/singer-list/singer-list.vue?f980","webpack:///./src/components/singer-list/use-fixed.ts","webpack:///./src/components/singer-list/use-shortcut.ts","webpack:///./src/components/singer-list/singer-list.vue","webpack:///./src/components/singer-list/singer-list.vue?312d","webpack:///./src/views/singer/singer.vue","webpack:///./src/views/singer/singer.vue?bc7c","webpack:///./src/service/singer.ts","webpack:///./src/components/singer-list/singer-list.vue?05ef","webpack:///./src/views/singer/singer.vue?c7eb"],"names":["_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_music_list","_resolveComponent","_openBlock","_createElementBlock","_createVNode","songs","title","pic","loading","defineComponent","createDetailComponent","SINGER_KEY","getSingerDetail","__exports__","_component_singer_list","_component_router_view","_directive_loading","_resolveDirective","_withDirectives","data","singers","onSelect","selectSinger","default","_withCtx","Component","_Transition","appear","name","_createBlock","_resolveDynamicComponent","selectedSinger","_","length","ref","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_component_scroll","_directive_lazy","onScroll","_createElementVNode","_Fragment","_renderList","group","key","_toDisplayString","list","item","id","onClick","$event","onItemClick","style","_normalizeStyle","fixedStyle","fixedTitle","_vShow","onTouchstart","_withModifiers","onShortcutTouchStart","onTouchmove","onShortcutTouchMove","onTouchend","shortcutList","index","_normalizeClass","current","currentIndex","useFixed","props","TITLE_HEIGHT","groupRef","scrollY","computed","value","distanceVal","distance","diff","transform","listHeights","watch","nextTick","calculate","newVal","listHeightsVal","i","heightTop","heightBottom","groupRefArr","children","height","push","clientHeight","pos","y","useShortcut","scrollRef","ANCHOR_HEIGHT","map","touch","y1","y2","anchorIndex","e","parseInt","target","dataset","touches","pageY","scrollTo","delta","isNaN","Math","max","min","scroll","targetEl","scrollToElement","components","Scroll","type","Array","emits","setup","emit","userFixed","SingerList","router","useRouter","state","reactive","getSingerListRes","getSingerList","then","res","singer","cache","path","mid","toRefs","Promise","resolve","reject","get","catch","err"],"mappings":"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","file":"js/singer.ca9327e9.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-14e0c74b\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"singer-detail\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_music_list = _resolveComponent(\"music-list\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_music_list, {\n      songs: _ctx.songs,\n      title: _ctx.title,\n      pic: _ctx.pic,\n      loading: _ctx.loading\n    }, null, 8, [\"songs\", \"title\", \"pic\", \"loading\"])\n  ]))\n}","\nimport createDetailComponent from '@/assets/ts/create-detail-component'\nimport { defineComponent } from 'vue'\nimport { getSingerDetail } from '@/service/singer'\nimport { SINGER_KEY } from '@/assets/ts/constant'\n\nexport default defineComponent(\n  createDetailComponent('singer-detail', SINGER_KEY, getSingerDetail)\n)\n\n","import { render } from \"./singer-detail.vue?vue&type=template&id=14e0c74b&scoped=true&ts=true\"\nimport script from \"./singer-detail.vue?vue&type=script&lang=ts\"\nexport * from \"./singer-detail.vue?vue&type=script&lang=ts\"\n\nimport \"./singer-detail.vue?vue&type=style&index=0&id=14e0c74b&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/v_ylqian/Desktop/vue3/vue3-music-next/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-14e0c74b\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./singer-detail.vue?vue&type=style&index=0&id=14e0c74b&lang=scss&scoped=true\"","import { resolveComponent as _resolveComponent, createVNode as _createVNode, resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, resolveDirective as _resolveDirective, createElementBlock as _createElementBlock, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-083f4028\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"singer\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_singer_list = _resolveComponent(\"singer-list\")!\n  const _component_router_view = _resolveComponent(\"router-view\")!\n  const _directive_loading = _resolveDirective(\"loading\")!\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_singer_list, {\n      data: _ctx.singers,\n      onSelect: _ctx.selectSinger\n    }, null, 8, [\"data\", \"onSelect\"]),\n    _createVNode(_component_router_view, null, {\n      default: _withCtx(({ Component }) => [\n        _createVNode(_Transition, {\n          appear: \"\",\n          name: \"slide\"\n        }, {\n          default: _withCtx(() => [\n            (_openBlock(), _createBlock(_resolveDynamicComponent(Component), { data: _ctx.selectedSinger }, null, 8, [\"data\"]))\n          ]),\n          _: 2\n        }, 1024)\n      ]),\n      _: 1\n    })\n  ])), [\n    [_directive_loading, !_ctx.singers.length]\n  ])\n}","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, vShow as _vShow, normalizeStyle as _normalizeStyle, normalizeClass as _normalizeClass, withModifiers as _withModifiers, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0058d527\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"groupRef\" }\nconst _hoisted_2 = { class: \"title\" }\nconst _hoisted_3 = [\"onClick\"]\nconst _hoisted_4 = { class: \"avatar\" }\nconst _hoisted_5 = { class: \"name\" }\nconst _hoisted_6 = { class: \"fixed-title\" }\nconst _hoisted_7 = [\"data-index\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_scroll = _resolveComponent(\"scroll\")!\n  const _directive_lazy = _resolveDirective(\"lazy\")!\n\n  return (_openBlock(), _createBlock(_component_scroll, {\n    class: \"singer-list\",\n    \"probe-type\": 3,\n    onScroll: _ctx.onScroll,\n    ref: \"scrollRef\"\n  }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"ul\", _hoisted_1, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.data, (group) => {\n          return (_openBlock(), _createElementBlock(\"li\", {\n            key: group.title,\n            class: \"group\"\n          }, [\n            _createElementVNode(\"h2\", _hoisted_2, _toDisplayString(group.title), 1),\n            _createElementVNode(\"ul\", null, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.list, (item) => {\n                return (_openBlock(), _createElementBlock(\"li\", {\n                  key: item.id,\n                  class: \"item\",\n                  onClick: ($event: any) => (_ctx.onItemClick(item))\n                }, [\n                  _withDirectives(_createElementVNode(\"img\", _hoisted_4, null, 512), [\n                    [_directive_lazy, item.pic]\n                  ]),\n                  _createElementVNode(\"span\", _hoisted_5, _toDisplayString(item.name), 1)\n                ], 8, _hoisted_3))\n              }), 128))\n            ])\n          ]))\n        }), 128))\n      ], 512),\n      _withDirectives(_createElementVNode(\"div\", {\n        class: \"fixed\",\n        style: _normalizeStyle(_ctx.fixedStyle)\n      }, [\n        _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.fixedTitle), 1)\n      ], 4), [\n        [_vShow, _ctx.fixedTitle]\n      ]),\n      _createElementVNode(\"div\", {\n        class: \"shortcut\",\n        onTouchstart: _cache[0] || (_cache[0] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.onShortcutTouchStart && _ctx.onShortcutTouchStart(...args)), [\"stop\",\"prevent\"])),\n        onTouchmove: _cache[1] || (_cache[1] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.onShortcutTouchMove && _ctx.onShortcutTouchMove(...args)), [\"stop\",\"prevent\"])),\n        onTouchend: _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"stop\",\"prevent\"]))\n      }, [\n        _createElementVNode(\"ul\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.shortcutList, (item, index) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              key: item,\n              \"data-index\": index,\n              class: _normalizeClass([\"item\", { current: _ctx.currentIndex === index }])\n            }, _toDisplayString(item), 11, _hoisted_7))\n          }), 128))\n        ])\n      ], 32)\n    ]),\n    _: 1\n  }, 8, [\"onScroll\"]))\n}","import { ref, watch, nextTick, computed } from 'vue'\n// 歌手列表滚动\nconst useFixed = (props: any) => {\n  // 字母栏高度\n  const TITLE_HEIGHT = 30\n\n  const groupRef = ref<any>(null)\n  // 当前滚动位置\n  const scrollY = ref(0)\n  // 固定栏字母\n  const fixedTitle = computed(() => {\n    if (scrollY.value < 0) {\n      return ''\n    }\n    return props.data[currentIndex.value]?.title || ''\n  })\n  // 字母重叠时的平移效果\n  const fixedStyle = computed(() => {\n    const distanceVal = distance.value\n    const diff = distanceVal < TITLE_HEIGHT ? distanceVal - TITLE_HEIGHT : 0\n    return {\n      transform: `translate3d(0, ${diff}px, 0)`\n    }\n  })\n  // 每个字母所在高度\n  const listHeights = ref<Array<number>>([])\n  const currentIndex = ref(0)\n  const distance = ref(0)\n\n  // 数据获取到等dom更新完时计算高度\n  watch(\n    () => props.data,\n    async () => {\n      await nextTick()\n      calculate()\n    }\n  )\n\n  // 监听当前滚动位置判断当前所处哪个字母\n  watch(\n    () => scrollY.value,\n    (newVal) => {\n      const listHeightsVal = listHeights.value\n      // 滚动到顶部\n      if (newVal < 0) {\n        currentIndex.value = 0\n        return\n      }\n      // 滚动到底部\n      if (newVal > listHeightsVal[listHeightsVal.length - 2]) {\n        currentIndex.value = listHeightsVal.length - 2\n        return\n      }\n      // 在中间滚动\n      for (let i = 0; i < listHeightsVal.length - 1; i++) {\n        const heightTop = listHeightsVal[i]\n        const heightBottom = listHeightsVal[i + 1]\n        if (newVal >= heightTop && newVal <= heightBottom) {\n          currentIndex.value = i\n          distance.value = heightBottom - newVal\n        }\n      }\n    }\n  )\n\n  // 计算每个字母所属div高度\n  const calculate = () => {\n    listHeights.value = []\n    const groupRefArr = groupRef.value.children\n    let height = 0\n\n    listHeights.value.push(height)\n    for (let i = 0; i < groupRefArr.length; i++) {\n      height += groupRefArr[i].clientHeight\n      listHeights.value.push(height)\n    }\n  }\n  // 监听滚动\n  const onScroll = (pos: { [key: string]: number }) => {\n    scrollY.value = -pos.y\n  }\n\n  return {\n    groupRef,\n    fixedTitle,\n    fixedStyle,\n    currentIndex,\n    onScroll\n  }\n}\n\nexport default useFixed\n","import { ref, computed } from 'vue'\n\n// 侧边导航栏\nconst useShortcut = (props: any, groupRef: any) => {\n  // 获取整个滚动组件\n  const scrollRef = ref<any>(null)\n  // 字母高度\n  const ANCHOR_HEIGHT = 18\n  // 字母list\n  const shortcutList = computed(() => {\n    return props.data.map((item: { [key: string]: any }) => {\n      return item.title\n    })\n  })\n  // 记录滑动\n  const touch = {\n    y1: 0,\n    y2: 0,\n    anchorIndex: 0\n  }\n  const onShortcutTouchStart = (e: any) => {\n    // 获取点击的当前字母index\n    const anchorIndex = parseInt(e.target.dataset.index)\n    // 记录手指触摸时位置\n    touch.y1 = e.touches[0].pageY\n    touch.anchorIndex = anchorIndex\n    scrollTo(anchorIndex)\n  }\n  const onShortcutTouchMove = (e: any) => {\n    touch.y2 = e.touches[0].pageY\n    // 滑动距离除以字母高度向下取整，计算滑动字母个数\n    const delta = (touch.y2 - touch.y1) / ANCHOR_HEIGHT | 0\n    // 计算滑动到 第几个\n    const anchorIndex = touch.anchorIndex + delta\n    scrollTo(anchorIndex)\n  }\n\n  const scrollTo = (index: number) => {\n    if (isNaN(index)) {\n      return\n    }\n    index = Math.max(0, Math.min(shortcutList.value.length - 1, index))\n    const scroll = scrollRef.value.scroll\n    const targetEl = groupRef.value.children[index]\n    // 调用滚动方法，滚动到点击的对应字母上\n    scroll.scrollToElement(targetEl, 0)\n  }\n\n  return {\n    shortcutList,\n    scrollRef,\n    onShortcutTouchStart,\n    onShortcutTouchMove\n  }\n}\n\nexport default useShortcut\n","\nimport { defineComponent, PropType } from 'vue'\nimport Scroll from '@/components/wrap-scroll/index'\nimport userFixed from './use-fixed'\nimport useShortcut from './use-shortcut'\nimport { Song } from '@/service/interface'\n\ninterface Singers {\n  list: Song[];\n  title: string;\n}\n\nexport default defineComponent({\n  name: 'singer-list',\n  components: { Scroll },\n  props: {\n    data: {\n      type: Array as PropType<Singers[]>,\n      default: () => {\n        return []\n      }\n    }\n  },\n  emits: ['select'],\n  setup (props, { emit }) {\n    const { groupRef, fixedTitle, fixedStyle, currentIndex, onScroll } =\n      userFixed(props)\n    const {\n      shortcutList,\n      scrollRef,\n      onShortcutTouchStart,\n      onShortcutTouchMove\n    } = useShortcut(props, groupRef)\n\n    const onItemClick = (item: any) => {\n      emit('select', item)\n    }\n\n    return {\n      onItemClick,\n      // userFixed\n      groupRef,\n      fixedTitle,\n      fixedStyle,\n      currentIndex,\n      onScroll,\n      // useShortcut\n      shortcutList,\n      scrollRef,\n      onShortcutTouchStart,\n      onShortcutTouchMove\n    }\n  }\n})\n","import { render } from \"./singer-list.vue?vue&type=template&id=0058d527&scoped=true&ts=true\"\nimport script from \"./singer-list.vue?vue&type=script&lang=ts\"\nexport * from \"./singer-list.vue?vue&type=script&lang=ts\"\n\nimport \"./singer-list.vue?vue&type=style&index=0&id=0058d527&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/v_ylqian/Desktop/vue3/vue3-music-next/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0058d527\"]])\n\nexport default __exports__","\nimport { defineComponent, reactive, toRefs } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { getSingerList } from '@/service/singer'\nimport { SINGER_KEY } from '@/assets/ts/constant'\nimport { cache } from '@/assets/ts/array-store'\nimport { Singer } from '@/service/interface'\nimport SingerList from '@/components/singer-list/singer-list.vue'\n\ninterface SingerItem {\n  [key: string]: any\n}\n\ninterface State {\n  singers: SingerItem[];\n  selectedSinger: SingerItem;\n}\n\nexport default defineComponent({\n  name: 'singer',\n  components: {\n    SingerList\n  },\n  setup () {\n    const router = useRouter()\n    const state = reactive({\n      singers: [],\n      selectedSinger: {}\n    }) as State\n\n    // 获取歌手数据\n    const getSingerListRes = () => {\n      getSingerList().then((res) => {\n        state.singers = res.singers\n      })\n    }\n    getSingerListRes()\n\n    const selectSinger = (singer: Singer) => {\n      state.selectedSinger = singer\n      // 缓存点击的歌手\n      cache(SINGER_KEY, singer)\n      router.push({\n        path: `/singer/${singer.mid}`\n      })\n    }\n\n    return {\n      ...toRefs(state),\n      selectSinger\n    }\n  }\n})\n","import { render } from \"./singer.vue?vue&type=template&id=083f4028&scoped=true&ts=true\"\nimport script from \"./singer.vue?vue&type=script&lang=ts\"\nexport * from \"./singer.vue?vue&type=script&lang=ts\"\n\nimport \"./singer.vue?vue&type=style&index=0&id=083f4028&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/v_ylqian/Desktop/vue3/vue3-music-next/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-083f4028\"]])\n\nexport default __exports__","import { get } from './base'\nimport { Song } from './interface'\n\ninterface Singers {\n  singers: {\n    list: Song[],\n    title: string\n  }[]\n}\n\n// 歌手列表\nexport const getSingerList = (): Promise<Singers> => {\n  return new Promise((resolve, reject) => {\n    get('/api/getSingerList')\n      .then((res) => {\n        resolve(res)\n      })\n      .catch((err) => {\n        reject(err)\n      })\n  })\n}\n\n// 歌手详情\nexport const getSingerDetail = (singer: Song): Promise<Singers> => {\n  return new Promise((resolve, reject) => {\n    get('/api/getSingerDetail', {\n      mid: singer.mid\n    })\n      .then((res) => {\n        resolve(res)\n      })\n      .catch((err) => {\n        reject(err)\n      })\n  })\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./singer-list.vue?vue&type=style&index=0&id=0058d527&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./singer.vue?vue&type=style&index=0&id=083f4028&lang=scss&scoped=true\""],"sourceRoot":""}